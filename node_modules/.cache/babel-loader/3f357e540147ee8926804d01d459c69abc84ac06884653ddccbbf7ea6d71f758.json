{"ast":null,"code":"import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport supportsPassive from '../_util/supportsPassive';\nexport function getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\nexport function getFixedTop(placeholderRect, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderRect.top - offsetTop) {\n    return \"\".concat(offsetTop + targetRect.top, \"px\");\n  }\n  return undefined;\n}\nexport function getFixedBottom(placeholderRect, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderRect.bottom + offsetBottom) {\n    var targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return \"\".concat(offsetBottom + targetBottomOffset, \"px\");\n  }\n  return undefined;\n}\n// ======================== Observer ========================\nvar TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nvar observerEntities = [];\nexport function getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\nexport function addObserveTarget(target, affix) {\n  if (!target) return;\n  var entity = observerEntities.find(function (item) {\n    return item.target === target;\n  });\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target: target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity);\n    // Add listener\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      entity.eventHandlers[eventName] = addEventListener(target, eventName, function () {\n        entity.affixList.forEach(function (targetAffix) {\n          var lazyUpdatePosition = targetAffix.exposed.lazyUpdatePosition;\n          lazyUpdatePosition();\n        }, (eventName === 'touchstart' || eventName === 'touchmove') && supportsPassive ? {\n          passive: true\n        } : false);\n      });\n    });\n  }\n}\nexport function removeObserveTarget(affix) {\n  var observerEntity = observerEntities.find(function (oriObserverEntity) {\n    var hasAffix = oriObserverEntity.affixList.some(function (item) {\n      return item === affix;\n    });\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(function (item) {\n        return item !== affix;\n      });\n    }\n    return hasAffix;\n  });\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(function (item) {\n      return item !== observerEntity;\n    });\n    // Remove listener\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      var handler = observerEntity.eventHandlers[eventName];\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}","map":{"version":3,"names":["addEventListener","supportsPassive","getTargetRect","target","window","getBoundingClientRect","top","bottom","innerHeight","getFixedTop","placeholderRect","targetRect","offsetTop","undefined","concat","getFixedBottom","offsetBottom","targetBottomOffset","TRIGGER_EVENTS","observerEntities","getObserverEntities","addObserveTarget","affix","entity","find","item","affixList","push","eventHandlers","forEach","eventName","targetAffix","lazyUpdatePosition","exposed","passive","removeObserveTarget","observerEntity","oriObserverEntity","hasAffix","some","filter","length","handler","remove"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/affix/utils.js"],"sourcesContent":["import addEventListener from '../vc-util/Dom/addEventListener';\nimport supportsPassive from '../_util/supportsPassive';\nexport function getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\nexport function getFixedTop(placeholderRect, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderRect.top - offsetTop) {\n    return `${offsetTop + targetRect.top}px`;\n  }\n  return undefined;\n}\nexport function getFixedBottom(placeholderRect, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderRect.bottom + offsetBottom) {\n    const targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return `${offsetBottom + targetBottomOffset}px`;\n  }\n  return undefined;\n}\n// ======================== Observer ========================\nconst TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nlet observerEntities = [];\nexport function getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\nexport function addObserveTarget(target, affix) {\n  if (!target) return;\n  let entity = observerEntities.find(item => item.target === target);\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity);\n    // Add listener\n    TRIGGER_EVENTS.forEach(eventName => {\n      entity.eventHandlers[eventName] = addEventListener(target, eventName, () => {\n        entity.affixList.forEach(targetAffix => {\n          const {\n            lazyUpdatePosition\n          } = targetAffix.exposed;\n          lazyUpdatePosition();\n        }, (eventName === 'touchstart' || eventName === 'touchmove') && supportsPassive ? {\n          passive: true\n        } : false);\n      });\n    });\n  }\n}\nexport function removeObserveTarget(affix) {\n  const observerEntity = observerEntities.find(oriObserverEntity => {\n    const hasAffix = oriObserverEntity.affixList.some(item => item === affix);\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(item => item !== affix);\n    }\n    return hasAffix;\n  });\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(item => item !== observerEntity);\n    // Remove listener\n    TRIGGER_EVENTS.forEach(eventName => {\n      const handler = observerEntity.eventHandlers[eventName];\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}