{"ast":null,"code":"import _slicedToArray from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { computed, watchEffect, onMounted, watch, onBeforeUnmount } from 'vue';\nimport { isInViewPort } from '../util';\nimport useState from '../../_util/hooks/useState';\nexport default function useTarget(target, open, gap, scrollIntoViewOptions) {\n  // ========================= Target =========================\n  // We trade `undefined` as not get target by function yet.\n  // `null` as empty target.\n  var _useState = useState(undefined),\n    _useState2 = _slicedToArray(_useState, 2),\n    targetElement = _useState2[0],\n    setTargetElement = _useState2[1];\n  watchEffect(function () {\n    var nextElement = typeof target.value === 'function' ? target.value() : target.value;\n    setTargetElement(nextElement || null);\n  }, {\n    flush: 'post'\n  });\n  // ========================= Align ==========================\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    posInfo = _useState4[0],\n    setPosInfo = _useState4[1];\n  var updatePos = function updatePos() {\n    if (!open.value) {\n      setPosInfo(null);\n      return;\n    }\n    if (targetElement.value) {\n      // Exist target element. We should scroll and get target position\n      if (!isInViewPort(targetElement.value) && open.value) {\n        targetElement.value.scrollIntoView(scrollIntoViewOptions.value);\n      }\n      var _targetElement$value$ = targetElement.value.getBoundingClientRect(),\n        left = _targetElement$value$.left,\n        top = _targetElement$value$.top,\n        width = _targetElement$value$.width,\n        height = _targetElement$value$.height;\n      var nextPosInfo = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        radius: 0\n      };\n      if (JSON.stringify(posInfo.value) !== JSON.stringify(nextPosInfo)) {\n        setPosInfo(nextPosInfo);\n      }\n    } else {\n      // Not exist target which means we just show in center\n      setPosInfo(null);\n    }\n  };\n  onMounted(function () {\n    watch([open, targetElement], function () {\n      updatePos();\n    }, {\n      flush: 'post',\n      immediate: true\n    });\n    // update when window resize\n    window.addEventListener('resize', updatePos);\n  });\n  onBeforeUnmount(function () {\n    window.removeEventListener('resize', updatePos);\n  });\n  // ======================== PosInfo =========================\n  var mergedPosInfo = computed(function () {\n    var _a, _b;\n    if (!posInfo.value) {\n      return posInfo.value;\n    }\n    var gapOffset = ((_a = gap.value) === null || _a === void 0 ? void 0 : _a.offset) || 6;\n    var gapRadius = ((_b = gap.value) === null || _b === void 0 ? void 0 : _b.radius) || 2;\n    return {\n      left: posInfo.value.left - gapOffset,\n      top: posInfo.value.top - gapOffset,\n      width: posInfo.value.width + gapOffset * 2,\n      height: posInfo.value.height + gapOffset * 2,\n      radius: gapRadius\n    };\n  });\n  return [mergedPosInfo, targetElement];\n}","map":{"version":3,"names":["computed","watchEffect","onMounted","watch","onBeforeUnmount","isInViewPort","useState","useTarget","target","open","gap","scrollIntoViewOptions","_useState","undefined","_useState2","_slicedToArray","targetElement","setTargetElement","nextElement","value","flush","_useState3","_useState4","posInfo","setPosInfo","updatePos","scrollIntoView","_targetElement$value$","getBoundingClientRect","left","top","width","height","nextPosInfo","radius","JSON","stringify","immediate","window","addEventListener","removeEventListener","mergedPosInfo","_a","_b","gapOffset","offset","gapRadius"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/vc-tour/hooks/useTarget.js"],"sourcesContent":["import { computed, watchEffect, onMounted, watch, onBeforeUnmount } from 'vue';\nimport { isInViewPort } from '../util';\nimport useState from '../../_util/hooks/useState';\nexport default function useTarget(target, open, gap, scrollIntoViewOptions) {\n  // ========================= Target =========================\n  // We trade `undefined` as not get target by function yet.\n  // `null` as empty target.\n  const [targetElement, setTargetElement] = useState(undefined);\n  watchEffect(() => {\n    const nextElement = typeof target.value === 'function' ? target.value() : target.value;\n    setTargetElement(nextElement || null);\n  }, {\n    flush: 'post'\n  });\n  // ========================= Align ==========================\n  const [posInfo, setPosInfo] = useState(null);\n  const updatePos = () => {\n    if (!open.value) {\n      setPosInfo(null);\n      return;\n    }\n    if (targetElement.value) {\n      // Exist target element. We should scroll and get target position\n      if (!isInViewPort(targetElement.value) && open.value) {\n        targetElement.value.scrollIntoView(scrollIntoViewOptions.value);\n      }\n      const {\n        left,\n        top,\n        width,\n        height\n      } = targetElement.value.getBoundingClientRect();\n      const nextPosInfo = {\n        left,\n        top,\n        width,\n        height,\n        radius: 0\n      };\n      if (JSON.stringify(posInfo.value) !== JSON.stringify(nextPosInfo)) {\n        setPosInfo(nextPosInfo);\n      }\n    } else {\n      // Not exist target which means we just show in center\n      setPosInfo(null);\n    }\n  };\n  onMounted(() => {\n    watch([open, targetElement], () => {\n      updatePos();\n    }, {\n      flush: 'post',\n      immediate: true\n    });\n    // update when window resize\n    window.addEventListener('resize', updatePos);\n  });\n  onBeforeUnmount(() => {\n    window.removeEventListener('resize', updatePos);\n  });\n  // ======================== PosInfo =========================\n  const mergedPosInfo = computed(() => {\n    var _a, _b;\n    if (!posInfo.value) {\n      return posInfo.value;\n    }\n    const gapOffset = ((_a = gap.value) === null || _a === void 0 ? void 0 : _a.offset) || 6;\n    const gapRadius = ((_b = gap.value) === null || _b === void 0 ? void 0 : _b.radius) || 2;\n    return {\n      left: posInfo.value.left - gapOffset,\n      top: posInfo.value.top - gapOffset,\n      width: posInfo.value.width + gapOffset * 2,\n      height: posInfo.value.height + gapOffset * 2,\n      radius: gapRadius\n    };\n  });\n  return [mergedPosInfo, targetElement];\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,SAAS,EAAEC,KAAK,EAAEC,eAAe,QAAQ,KAAK;AAC9E,SAASC,YAAY,QAAQ,SAAS;AACtC,OAAOC,QAAQ,MAAM,4BAA4B;AACjD,eAAe,SAASC,SAASA,CAACC,MAAM,EAAEC,IAAI,EAAEC,GAAG,EAAEC,qBAAqB,EAAE;EAC1E;EACA;EACA;EACA,IAAAC,SAAA,GAA0CN,QAAQ,CAACO,SAAS,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA;IAAtDI,aAAa,GAAAF,UAAA;IAAEG,gBAAgB,GAAAH,UAAA;EACtCb,WAAW,CAAC,YAAM;IAChB,IAAMiB,WAAW,GAAG,OAAOV,MAAM,CAACW,KAAK,KAAK,UAAU,GAAGX,MAAM,CAACW,KAAK,CAAC,CAAC,GAAGX,MAAM,CAACW,KAAK;IACtFF,gBAAgB,CAACC,WAAW,IAAI,IAAI,CAAC;EACvC,CAAC,EAAE;IACDE,KAAK,EAAE;EACT,CAAC,CAAC;EACF;EACA,IAAAC,UAAA,GAA8Bf,QAAQ,CAAC,IAAI,CAAC;IAAAgB,UAAA,GAAAP,cAAA,CAAAM,UAAA;IAArCE,OAAO,GAAAD,UAAA;IAAEE,UAAU,GAAAF,UAAA;EAC1B,IAAMG,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAS;IACtB,IAAI,CAAChB,IAAI,CAACU,KAAK,EAAE;MACfK,UAAU,CAAC,IAAI,CAAC;MAChB;IACF;IACA,IAAIR,aAAa,CAACG,KAAK,EAAE;MACvB;MACA,IAAI,CAACd,YAAY,CAACW,aAAa,CAACG,KAAK,CAAC,IAAIV,IAAI,CAACU,KAAK,EAAE;QACpDH,aAAa,CAACG,KAAK,CAACO,cAAc,CAACf,qBAAqB,CAACQ,KAAK,CAAC;MACjE;MACA,IAAAQ,qBAAA,GAKIX,aAAa,CAACG,KAAK,CAACS,qBAAqB,CAAC,CAAC;QAJ7CC,IAAI,GAAAF,qBAAA,CAAJE,IAAI;QACJC,GAAG,GAAAH,qBAAA,CAAHG,GAAG;QACHC,KAAK,GAAAJ,qBAAA,CAALI,KAAK;QACLC,MAAM,GAAAL,qBAAA,CAANK,MAAM;MAER,IAAMC,WAAW,GAAG;QAClBJ,IAAI,EAAJA,IAAI;QACJC,GAAG,EAAHA,GAAG;QACHC,KAAK,EAALA,KAAK;QACLC,MAAM,EAANA,MAAM;QACNE,MAAM,EAAE;MACV,CAAC;MACD,IAAIC,IAAI,CAACC,SAAS,CAACb,OAAO,CAACJ,KAAK,CAAC,KAAKgB,IAAI,CAACC,SAAS,CAACH,WAAW,CAAC,EAAE;QACjET,UAAU,CAACS,WAAW,CAAC;MACzB;IACF,CAAC,MAAM;MACL;MACAT,UAAU,CAAC,IAAI,CAAC;IAClB;EACF,CAAC;EACDtB,SAAS,CAAC,YAAM;IACdC,KAAK,CAAC,CAACM,IAAI,EAAEO,aAAa,CAAC,EAAE,YAAM;MACjCS,SAAS,CAAC,CAAC;IACb,CAAC,EAAE;MACDL,KAAK,EAAE,MAAM;MACbiB,SAAS,EAAE;IACb,CAAC,CAAC;IACF;IACAC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEd,SAAS,CAAC;EAC9C,CAAC,CAAC;EACFrB,eAAe,CAAC,YAAM;IACpBkC,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEf,SAAS,CAAC;EACjD,CAAC,CAAC;EACF;EACA,IAAMgB,aAAa,GAAGzC,QAAQ,CAAC,YAAM;IACnC,IAAI0C,EAAE,EAAEC,EAAE;IACV,IAAI,CAACpB,OAAO,CAACJ,KAAK,EAAE;MAClB,OAAOI,OAAO,CAACJ,KAAK;IACtB;IACA,IAAMyB,SAAS,GAAG,CAAC,CAACF,EAAE,GAAGhC,GAAG,CAACS,KAAK,MAAM,IAAI,IAAIuB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,MAAM,KAAK,CAAC;IACxF,IAAMC,SAAS,GAAG,CAAC,CAACH,EAAE,GAAGjC,GAAG,CAACS,KAAK,MAAM,IAAI,IAAIwB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACT,MAAM,KAAK,CAAC;IACxF,OAAO;MACLL,IAAI,EAAEN,OAAO,CAACJ,KAAK,CAACU,IAAI,GAAGe,SAAS;MACpCd,GAAG,EAAEP,OAAO,CAACJ,KAAK,CAACW,GAAG,GAAGc,SAAS;MAClCb,KAAK,EAAER,OAAO,CAACJ,KAAK,CAACY,KAAK,GAAGa,SAAS,GAAG,CAAC;MAC1CZ,MAAM,EAAET,OAAO,CAACJ,KAAK,CAACa,MAAM,GAAGY,SAAS,GAAG,CAAC;MAC5CV,MAAM,EAAEY;IACV,CAAC;EACH,CAAC,CAAC;EACF,OAAO,CAACL,aAAa,EAAEzB,aAAa,CAAC;AACvC"},"metadata":{},"sourceType":"module","externalDependencies":[]}