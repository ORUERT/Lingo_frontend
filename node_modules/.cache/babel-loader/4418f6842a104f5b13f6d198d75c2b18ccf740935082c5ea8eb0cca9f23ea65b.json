{"ast":null,"code":"import \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport ExpandedRow from './ExpandedRow';\nimport { getColumnsKey } from '../utils/valueUtil';\nimport MeasureCell from './MeasureCell';\nimport BodyRow from './BodyRow';\nimport useFlattenRecords from '../hooks/useFlattenRecords';\nimport { defineComponent, shallowRef, toRef } from 'vue';\nimport { useInjectResize } from '../context/ResizeContext';\nimport { useInjectTable } from '../context/TableContext';\nimport { useInjectBody } from '../context/BodyContext';\nimport { useProvideHover } from '../context/HoverContext';\nexport default defineComponent({\n  name: 'Body',\n  props: ['data', 'getRowKey', 'measureColumnWidth', 'expandedKeys', 'customRow', 'rowExpandable', 'childrenColumnName'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var resizeContext = useInjectResize();\n    var tableContext = useInjectTable();\n    var bodyContext = useInjectBody();\n    var flattenData = useFlattenRecords(toRef(props, 'data'), toRef(props, 'childrenColumnName'), toRef(props, 'expandedKeys'), toRef(props, 'getRowKey'));\n    var startRow = shallowRef(-1);\n    var endRow = shallowRef(-1);\n    var timeoutId;\n    useProvideHover({\n      startRow: startRow,\n      endRow: endRow,\n      onHover: function onHover(start, end) {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(function () {\n          startRow.value = start;\n          endRow.value = end;\n        }, 100);\n      }\n    });\n    return function () {\n      var _a;\n      var data = props.data,\n        getRowKey = props.getRowKey,\n        measureColumnWidth = props.measureColumnWidth,\n        expandedKeys = props.expandedKeys,\n        customRow = props.customRow,\n        rowExpandable = props.rowExpandable,\n        childrenColumnName = props.childrenColumnName;\n      var onColumnResize = resizeContext.onColumnResize;\n      var prefixCls = tableContext.prefixCls,\n        getComponent = tableContext.getComponent;\n      var flattenColumns = bodyContext.flattenColumns;\n      var WrapperComponent = getComponent(['body', 'wrapper'], 'tbody');\n      var trComponent = getComponent(['body', 'row'], 'tr');\n      var tdComponent = getComponent(['body', 'cell'], 'td');\n      var rows;\n      if (data.length) {\n        rows = flattenData.value.map(function (item, idx) {\n          var record = item.record,\n            indent = item.indent,\n            renderIndex = item.index;\n          var key = getRowKey(record, idx);\n          return _createVNode(BodyRow, {\n            \"key\": key,\n            \"rowKey\": key,\n            \"record\": record,\n            \"recordKey\": key,\n            \"index\": idx,\n            \"renderIndex\": renderIndex,\n            \"rowComponent\": trComponent,\n            \"cellComponent\": tdComponent,\n            \"expandedKeys\": expandedKeys,\n            \"customRow\": customRow,\n            \"getRowKey\": getRowKey,\n            \"rowExpandable\": rowExpandable,\n            \"childrenColumnName\": childrenColumnName,\n            \"indent\": indent\n          }, null);\n        });\n      } else {\n        rows = _createVNode(ExpandedRow, {\n          \"expanded\": true,\n          \"class\": \"\".concat(prefixCls, \"-placeholder\"),\n          \"prefixCls\": prefixCls,\n          \"component\": trComponent,\n          \"cellComponent\": tdComponent,\n          \"colSpan\": flattenColumns.length,\n          \"isEmpty\": true\n        }, {\n          \"default\": function _default() {\n            return [(_a = slots.emptyNode) === null || _a === void 0 ? void 0 : _a.call(slots)];\n          }\n        });\n      }\n      var columnsKey = getColumnsKey(flattenColumns);\n      return _createVNode(WrapperComponent, {\n        \"class\": \"\".concat(prefixCls, \"-tbody\")\n      }, {\n        \"default\": function _default() {\n          return [measureColumnWidth && _createVNode(\"tr\", {\n            \"aria-hidden\": \"true\",\n            \"class\": \"\".concat(prefixCls, \"-measure-row\"),\n            \"style\": {\n              height: 0,\n              fontSize: 0\n            }\n          }, [columnsKey.map(function (columnKey) {\n            return _createVNode(MeasureCell, {\n              \"key\": columnKey,\n              \"columnKey\": columnKey,\n              \"onColumnResize\": onColumnResize\n            }, null);\n          })]), rows];\n        }\n      });\n    };\n  }\n});","map":{"version":3,"names":["createVNode","_createVNode","ExpandedRow","getColumnsKey","MeasureCell","BodyRow","useFlattenRecords","defineComponent","shallowRef","toRef","useInjectResize","useInjectTable","useInjectBody","useProvideHover","name","props","setup","_ref","slots","resizeContext","tableContext","bodyContext","flattenData","startRow","endRow","timeoutId","onHover","start","end","clearTimeout","setTimeout","value","_a","data","getRowKey","measureColumnWidth","expandedKeys","customRow","rowExpandable","childrenColumnName","onColumnResize","prefixCls","getComponent","flattenColumns","WrapperComponent","trComponent","tdComponent","rows","length","map","item","idx","record","indent","renderIndex","index","key","concat","_default","emptyNode","call","columnsKey","height","fontSize","columnKey"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/vc-table/Body/index.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport ExpandedRow from './ExpandedRow';\nimport { getColumnsKey } from '../utils/valueUtil';\nimport MeasureCell from './MeasureCell';\nimport BodyRow from './BodyRow';\nimport useFlattenRecords from '../hooks/useFlattenRecords';\nimport { defineComponent, shallowRef, toRef } from 'vue';\nimport { useInjectResize } from '../context/ResizeContext';\nimport { useInjectTable } from '../context/TableContext';\nimport { useInjectBody } from '../context/BodyContext';\nimport { useProvideHover } from '../context/HoverContext';\nexport default defineComponent({\n  name: 'Body',\n  props: ['data', 'getRowKey', 'measureColumnWidth', 'expandedKeys', 'customRow', 'rowExpandable', 'childrenColumnName'],\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const resizeContext = useInjectResize();\n    const tableContext = useInjectTable();\n    const bodyContext = useInjectBody();\n    const flattenData = useFlattenRecords(toRef(props, 'data'), toRef(props, 'childrenColumnName'), toRef(props, 'expandedKeys'), toRef(props, 'getRowKey'));\n    const startRow = shallowRef(-1);\n    const endRow = shallowRef(-1);\n    let timeoutId;\n    useProvideHover({\n      startRow,\n      endRow,\n      onHover: (start, end) => {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => {\n          startRow.value = start;\n          endRow.value = end;\n        }, 100);\n      }\n    });\n    return () => {\n      var _a;\n      const {\n        data,\n        getRowKey,\n        measureColumnWidth,\n        expandedKeys,\n        customRow,\n        rowExpandable,\n        childrenColumnName\n      } = props;\n      const {\n        onColumnResize\n      } = resizeContext;\n      const {\n        prefixCls,\n        getComponent\n      } = tableContext;\n      const {\n        flattenColumns\n      } = bodyContext;\n      const WrapperComponent = getComponent(['body', 'wrapper'], 'tbody');\n      const trComponent = getComponent(['body', 'row'], 'tr');\n      const tdComponent = getComponent(['body', 'cell'], 'td');\n      let rows;\n      if (data.length) {\n        rows = flattenData.value.map((item, idx) => {\n          const {\n            record,\n            indent,\n            index: renderIndex\n          } = item;\n          const key = getRowKey(record, idx);\n          return _createVNode(BodyRow, {\n            \"key\": key,\n            \"rowKey\": key,\n            \"record\": record,\n            \"recordKey\": key,\n            \"index\": idx,\n            \"renderIndex\": renderIndex,\n            \"rowComponent\": trComponent,\n            \"cellComponent\": tdComponent,\n            \"expandedKeys\": expandedKeys,\n            \"customRow\": customRow,\n            \"getRowKey\": getRowKey,\n            \"rowExpandable\": rowExpandable,\n            \"childrenColumnName\": childrenColumnName,\n            \"indent\": indent\n          }, null);\n        });\n      } else {\n        rows = _createVNode(ExpandedRow, {\n          \"expanded\": true,\n          \"class\": `${prefixCls}-placeholder`,\n          \"prefixCls\": prefixCls,\n          \"component\": trComponent,\n          \"cellComponent\": tdComponent,\n          \"colSpan\": flattenColumns.length,\n          \"isEmpty\": true\n        }, {\n          default: () => [(_a = slots.emptyNode) === null || _a === void 0 ? void 0 : _a.call(slots)]\n        });\n      }\n      const columnsKey = getColumnsKey(flattenColumns);\n      return _createVNode(WrapperComponent, {\n        \"class\": `${prefixCls}-tbody`\n      }, {\n        default: () => [measureColumnWidth && _createVNode(\"tr\", {\n          \"aria-hidden\": \"true\",\n          \"class\": `${prefixCls}-measure-row`,\n          \"style\": {\n            height: 0,\n            fontSize: 0\n          }\n        }, [columnsKey.map(columnKey => _createVNode(MeasureCell, {\n          \"key\": columnKey,\n          \"columnKey\": columnKey,\n          \"onColumnResize\": onColumnResize\n        }, null))]), rows]\n      });\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}