{"ast":null,"code":"import _slicedToArray from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.number.is-nan.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.parse-float.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { onBeforeUnmount, onMounted, Transition, render, defineComponent, shallowRef } from 'vue';\nimport useState from '../hooks/useState';\nimport { objectType } from '../type';\nimport { getTargetWaveColor } from './util';\nimport wrapperRaf from '../raf';\nfunction validateNum(value) {\n  return Number.isNaN(value) ? 0 : value;\n}\nvar WaveEffect = defineComponent({\n  props: {\n    target: objectType(),\n    className: String\n  },\n  setup: function setup(props) {\n    var divRef = shallowRef(null);\n    var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      color = _useState2[0],\n      setWaveColor = _useState2[1];\n    var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      borderRadius = _useState4[0],\n      setBorderRadius = _useState4[1];\n    var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      left = _useState6[0],\n      setLeft = _useState6[1];\n    var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      top = _useState8[0],\n      setTop = _useState8[1];\n    var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      width = _useState10[0],\n      setWidth = _useState10[1];\n    var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      height = _useState12[0],\n      setHeight = _useState12[1];\n    var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      enabled = _useState14[0],\n      setEnabled = _useState14[1];\n    function syncPos() {\n      var target = props.target;\n      var nodeStyle = getComputedStyle(target);\n      // Get wave color from target\n      setWaveColor(getTargetWaveColor(target));\n      var isStatic = nodeStyle.position === 'static';\n      // Rect\n      var borderLeftWidth = nodeStyle.borderLeftWidth,\n        borderTopWidth = nodeStyle.borderTopWidth;\n      setLeft(isStatic ? target.offsetLeft : validateNum(-parseFloat(borderLeftWidth)));\n      setTop(isStatic ? target.offsetTop : validateNum(-parseFloat(borderTopWidth)));\n      setWidth(target.offsetWidth);\n      setHeight(target.offsetHeight);\n      // Get border radius\n      var borderTopLeftRadius = nodeStyle.borderTopLeftRadius,\n        borderTopRightRadius = nodeStyle.borderTopRightRadius,\n        borderBottomLeftRadius = nodeStyle.borderBottomLeftRadius,\n        borderBottomRightRadius = nodeStyle.borderBottomRightRadius;\n      setBorderRadius([borderTopLeftRadius, borderTopRightRadius, borderBottomRightRadius, borderBottomLeftRadius].map(function (radius) {\n        return validateNum(parseFloat(radius));\n      }));\n    }\n    // Add resize observer to follow size\n    var resizeObserver;\n    var rafId;\n    var timeoutId;\n    var clear = function clear() {\n      clearTimeout(timeoutId);\n      wrapperRaf.cancel(rafId);\n      resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.disconnect();\n    };\n    var removeDom = function removeDom() {\n      var _a;\n      var holder = (_a = divRef.value) === null || _a === void 0 ? void 0 : _a.parentElement;\n      if (holder) {\n        render(null, holder);\n        if (holder.parentElement) {\n          holder.parentElement.removeChild(holder);\n        }\n      }\n    };\n    onMounted(function () {\n      clear();\n      timeoutId = setTimeout(function () {\n        removeDom();\n      }, 5000);\n      var target = props.target;\n      if (target) {\n        // We need delay to check position here\n        // since UI may change after click\n        rafId = wrapperRaf(function () {\n          syncPos();\n          setEnabled(true);\n        });\n        if (typeof ResizeObserver !== 'undefined') {\n          resizeObserver = new ResizeObserver(syncPos);\n          resizeObserver.observe(target);\n        }\n      }\n    });\n    onBeforeUnmount(function () {\n      clear();\n    });\n    var onTransitionend = function onTransitionend(e) {\n      if (e.propertyName === 'opacity') {\n        removeDom();\n      }\n    };\n    return function () {\n      if (!enabled.value) {\n        return null;\n      }\n      var waveStyle = {\n        left: \"\".concat(left.value, \"px\"),\n        top: \"\".concat(top.value, \"px\"),\n        width: \"\".concat(width.value, \"px\"),\n        height: \"\".concat(height.value, \"px\"),\n        borderRadius: borderRadius.value.map(function (radius) {\n          return \"\".concat(radius, \"px\");\n        }).join(' ')\n      };\n      if (color) {\n        waveStyle['--wave-color'] = color.value;\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"name\": \"wave-motion\",\n        \"appearFromClass\": \"wave-motion-appear\",\n        \"appearActiveClass\": \"wave-motion-appear\",\n        \"appearToClass\": \"wave-motion-appear wave-motion-appear-active\"\n      }, {\n        \"default\": function _default() {\n          return [_createVNode(\"div\", {\n            \"ref\": divRef,\n            \"class\": props.className,\n            \"style\": waveStyle,\n            \"onTransitionend\": onTransitionend\n          }, null)];\n        }\n      });\n    };\n  }\n});\nfunction showWaveEffect(node, className) {\n  // Create holder\n  var holder = document.createElement('div');\n  holder.style.position = 'absolute';\n  holder.style.left = \"0px\";\n  holder.style.top = \"0px\";\n  node === null || node === void 0 ? void 0 : node.insertBefore(holder, node === null || node === void 0 ? void 0 : node.firstChild);\n  render(_createVNode(WaveEffect, {\n    \"target\": node,\n    \"className\": className\n  }, null), holder);\n}\nexport default showWaveEffect;","map":{"version":3,"names":["createVNode","_createVNode","onBeforeUnmount","onMounted","Transition","render","defineComponent","shallowRef","useState","objectType","getTargetWaveColor","wrapperRaf","validateNum","value","Number","isNaN","WaveEffect","props","target","className","String","setup","divRef","_useState","_useState2","_slicedToArray","color","setWaveColor","_useState3","_useState4","borderRadius","setBorderRadius","_useState5","_useState6","left","setLeft","_useState7","_useState8","top","setTop","_useState9","_useState10","width","setWidth","_useState11","_useState12","height","setHeight","_useState13","_useState14","enabled","setEnabled","syncPos","nodeStyle","getComputedStyle","isStatic","position","borderLeftWidth","borderTopWidth","offsetLeft","parseFloat","offsetTop","offsetWidth","offsetHeight","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","map","radius","resizeObserver","rafId","timeoutId","clear","clearTimeout","cancel","disconnect","removeDom","_a","holder","parentElement","removeChild","setTimeout","ResizeObserver","observe","onTransitionend","e","propertyName","waveStyle","concat","join","_default","showWaveEffect","node","document","createElement","style","insertBefore","firstChild"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/_util/wave/WaveEffect.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { onBeforeUnmount, onMounted, Transition, render, defineComponent, shallowRef } from 'vue';\nimport useState from '../hooks/useState';\nimport { objectType } from '../type';\nimport { getTargetWaveColor } from './util';\nimport wrapperRaf from '../raf';\nfunction validateNum(value) {\n  return Number.isNaN(value) ? 0 : value;\n}\nconst WaveEffect = defineComponent({\n  props: {\n    target: objectType(),\n    className: String\n  },\n  setup(props) {\n    const divRef = shallowRef(null);\n    const [color, setWaveColor] = useState(null);\n    const [borderRadius, setBorderRadius] = useState([]);\n    const [left, setLeft] = useState(0);\n    const [top, setTop] = useState(0);\n    const [width, setWidth] = useState(0);\n    const [height, setHeight] = useState(0);\n    const [enabled, setEnabled] = useState(false);\n    function syncPos() {\n      const {\n        target\n      } = props;\n      const nodeStyle = getComputedStyle(target);\n      // Get wave color from target\n      setWaveColor(getTargetWaveColor(target));\n      const isStatic = nodeStyle.position === 'static';\n      // Rect\n      const {\n        borderLeftWidth,\n        borderTopWidth\n      } = nodeStyle;\n      setLeft(isStatic ? target.offsetLeft : validateNum(-parseFloat(borderLeftWidth)));\n      setTop(isStatic ? target.offsetTop : validateNum(-parseFloat(borderTopWidth)));\n      setWidth(target.offsetWidth);\n      setHeight(target.offsetHeight);\n      // Get border radius\n      const {\n        borderTopLeftRadius,\n        borderTopRightRadius,\n        borderBottomLeftRadius,\n        borderBottomRightRadius\n      } = nodeStyle;\n      setBorderRadius([borderTopLeftRadius, borderTopRightRadius, borderBottomRightRadius, borderBottomLeftRadius].map(radius => validateNum(parseFloat(radius))));\n    }\n    // Add resize observer to follow size\n    let resizeObserver;\n    let rafId;\n    let timeoutId;\n    const clear = () => {\n      clearTimeout(timeoutId);\n      wrapperRaf.cancel(rafId);\n      resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.disconnect();\n    };\n    const removeDom = () => {\n      var _a;\n      const holder = (_a = divRef.value) === null || _a === void 0 ? void 0 : _a.parentElement;\n      if (holder) {\n        render(null, holder);\n        if (holder.parentElement) {\n          holder.parentElement.removeChild(holder);\n        }\n      }\n    };\n    onMounted(() => {\n      clear();\n      timeoutId = setTimeout(() => {\n        removeDom();\n      }, 5000);\n      const {\n        target\n      } = props;\n      if (target) {\n        // We need delay to check position here\n        // since UI may change after click\n        rafId = wrapperRaf(() => {\n          syncPos();\n          setEnabled(true);\n        });\n        if (typeof ResizeObserver !== 'undefined') {\n          resizeObserver = new ResizeObserver(syncPos);\n          resizeObserver.observe(target);\n        }\n      }\n    });\n    onBeforeUnmount(() => {\n      clear();\n    });\n    const onTransitionend = e => {\n      if (e.propertyName === 'opacity') {\n        removeDom();\n      }\n    };\n    return () => {\n      if (!enabled.value) {\n        return null;\n      }\n      const waveStyle = {\n        left: `${left.value}px`,\n        top: `${top.value}px`,\n        width: `${width.value}px`,\n        height: `${height.value}px`,\n        borderRadius: borderRadius.value.map(radius => `${radius}px`).join(' ')\n      };\n      if (color) {\n        waveStyle['--wave-color'] = color.value;\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"name\": \"wave-motion\",\n        \"appearFromClass\": \"wave-motion-appear\",\n        \"appearActiveClass\": \"wave-motion-appear\",\n        \"appearToClass\": \"wave-motion-appear wave-motion-appear-active\"\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"ref\": divRef,\n          \"class\": props.className,\n          \"style\": waveStyle,\n          \"onTransitionend\": onTransitionend\n        }, null)]\n      });\n    };\n  }\n});\nfunction showWaveEffect(node, className) {\n  // Create holder\n  const holder = document.createElement('div');\n  holder.style.position = 'absolute';\n  holder.style.left = `0px`;\n  holder.style.top = `0px`;\n  node === null || node === void 0 ? void 0 : node.insertBefore(holder, node === null || node === void 0 ? void 0 : node.firstChild);\n  render(_createVNode(WaveEffect, {\n    \"target\": node,\n    \"className\": className\n  }, null), holder);\n}\nexport default showWaveEffect;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}