{"ast":null,"code":"import _defineProperty from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _toConsumableArray from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { computed } from 'vue';\nexport var SEARCH_MARK = '__rc_cascader_search_mark__';\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\nvar defaultRender = function defaultRender(_ref2) {\n  var path = _ref2.path,\n    fieldNames = _ref2.fieldNames;\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\nexport default (function (search, options, fieldNames, prefixCls, config, changeOnSelect) {\n  return computed(function () {\n    var _config$value = config.value,\n      _config$value$filter = _config$value.filter,\n      filter = _config$value$filter === void 0 ? defaultFilter : _config$value$filter,\n      _config$value$render = _config$value.render,\n      render = _config$value$render === void 0 ? defaultRender : _config$value$render,\n      _config$value$limit = _config$value.limit,\n      limit = _config$value$limit === void 0 ? 50 : _config$value$limit,\n      sort = _config$value.sort;\n    var filteredOptions = [];\n    if (!search.value) {\n      return [];\n    }\n    function dig(list, pathOptions) {\n      list.forEach(function (option) {\n        // Perf saving when `sort` is disabled and `limit` is provided\n        if (!sort && limit > 0 && filteredOptions.length >= limit) {\n          return;\n        }\n        var connectedPathOptions = [].concat(_toConsumableArray(pathOptions), [option]);\n        var children = option[fieldNames.value.children];\n        // If current option is filterable\n        if (\n        // If is leaf option\n        !children || children.length === 0 ||\n        // If is changeOnSelect\n        changeOnSelect.value) {\n          if (filter(search.value, connectedPathOptions, {\n            label: fieldNames.value.label\n          })) {\n            var _extends2;\n            filteredOptions.push(_extends(_extends({}, option), (_extends2 = {}, _defineProperty(_extends2, fieldNames.value.label, render({\n              inputValue: search.value,\n              path: connectedPathOptions,\n              prefixCls: prefixCls.value,\n              fieldNames: fieldNames.value\n            })), _defineProperty(_extends2, SEARCH_MARK, connectedPathOptions), _extends2)));\n          }\n        }\n        if (children) {\n          dig(option[fieldNames.value.children], connectedPathOptions);\n        }\n      });\n    }\n    dig(options.value, []);\n    // Do sort\n    if (sort) {\n      filteredOptions.sort(function (a, b) {\n        return sort(a[SEARCH_MARK], b[SEARCH_MARK], search.value, fieldNames.value);\n      });\n    }\n    return limit > 0 ? filteredOptions.slice(0, limit) : filteredOptions;\n  });\n});","map":{"version":3,"names":["_extends","computed","SEARCH_MARK","defaultFilter","search","options","_ref","label","some","opt","String","toLowerCase","includes","defaultRender","_ref2","path","fieldNames","map","join","prefixCls","config","changeOnSelect","_config$value","value","_config$value$filter","filter","_config$value$render","render","_config$value$limit","limit","sort","filteredOptions","dig","list","pathOptions","forEach","option","length","connectedPathOptions","concat","_toConsumableArray","children","_extends2","push","_defineProperty","inputValue","a","b","slice"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/vc-cascader/hooks/useSearchOptions.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { computed } from 'vue';\nexport const SEARCH_MARK = '__rc_cascader_search_mark__';\nconst defaultFilter = (search, options, _ref) => {\n  let {\n    label\n  } = _ref;\n  return options.some(opt => String(opt[label]).toLowerCase().includes(search.toLowerCase()));\n};\nconst defaultRender = _ref2 => {\n  let {\n    path,\n    fieldNames\n  } = _ref2;\n  return path.map(opt => opt[fieldNames.label]).join(' / ');\n};\nexport default ((search, options, fieldNames, prefixCls, config, changeOnSelect) => {\n  return computed(() => {\n    const {\n      filter = defaultFilter,\n      render = defaultRender,\n      limit = 50,\n      sort\n    } = config.value;\n    const filteredOptions = [];\n    if (!search.value) {\n      return [];\n    }\n    function dig(list, pathOptions) {\n      list.forEach(option => {\n        // Perf saving when `sort` is disabled and `limit` is provided\n        if (!sort && limit > 0 && filteredOptions.length >= limit) {\n          return;\n        }\n        const connectedPathOptions = [...pathOptions, option];\n        const children = option[fieldNames.value.children];\n        // If current option is filterable\n        if (\n        // If is leaf option\n        !children || children.length === 0 ||\n        // If is changeOnSelect\n        changeOnSelect.value) {\n          if (filter(search.value, connectedPathOptions, {\n            label: fieldNames.value.label\n          })) {\n            filteredOptions.push(_extends(_extends({}, option), {\n              [fieldNames.value.label]: render({\n                inputValue: search.value,\n                path: connectedPathOptions,\n                prefixCls: prefixCls.value,\n                fieldNames: fieldNames.value\n              }),\n              [SEARCH_MARK]: connectedPathOptions\n            }));\n          }\n        }\n        if (children) {\n          dig(option[fieldNames.value.children], connectedPathOptions);\n        }\n      });\n    }\n    dig(options.value, []);\n    // Do sort\n    if (sort) {\n      filteredOptions.sort((a, b) => {\n        return sort(a[SEARCH_MARK], b[SEARCH_MARK], search.value, fieldNames.value);\n      });\n    }\n    return limit > 0 ? filteredOptions.slice(0, limit) : filteredOptions;\n  });\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}