{"ast":null,"code":"import _slicedToArray from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { computed, defineComponent, reactive, ref } from 'vue';\nimport axios from \"@/axios\";\nimport { useStore } from 'vuex';\nimport { useRouter, useRoute } from \"vue-router\";\nimport { message } from \"ant-design-vue\";\nexport default defineComponent({\n  setup: function setup() {\n    var _this = this;\n    var _message$useMessage = message.useMessage(),\n      _message$useMessage2 = _slicedToArray(_message$useMessage, 2),\n      messageApi = _message$useMessage2[0],\n      contextholder = _message$useMessage2[1];\n    var isReg = ref(false);\n    var onReg = computed({\n      get: function get() {\n        return isReg;\n      },\n      set: function set() {\n        isReg.value = !isReg.value;\n      }\n    });\n    var store = useStore();\n    var router = useRouter();\n    // const isRegister = reactive({\n    //    isReg:false,\n    // });\n    var formState = reactive({\n      username: 'oruert',\n      password: '321',\n      rememberMe: false\n    });\n    var rules = reactive({\n      username: [{\n        required: true,\n        message: '请输入用户名',\n        trigger: 'blur'\n      }, {\n        min: 3,\n        max: 15,\n        message: '长度在 3 到 15 个字符',\n        trigger: 'blur'\n      }],\n      password: [{\n        required: true,\n        message: '请选择密码',\n        trigger: 'change'\n      }]\n    });\n    var onFinish = function onFinish(values) {\n      console.log('Success:', values.username);\n      axios.post('/user/login', values).then(function (res) {\n        // console.log(res)\n        console.log(res.data);\n        if (res.data.code === '200') {\n          var jwt = res.data.data;\n          console.log(\"jwt\", jwt);\n\n          // 把数据共享出去\n          store.commit(\"SET_TOKEN\", jwt);\n          // 获取\n          router.push('/home');\n        } else {\n          _this.$message.error('登录失败');\n        }\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    };\n    var onFinishFailed = function onFinishFailed(errorInfo) {\n      console.log('Failed:', errorInfo);\n    };\n    var switchRegister = function switchRegister() {\n      isReg.value = !isReg.value;\n      console.log(isReg);\n    };\n    var onRegister = function onRegister(values) {\n      axios.post('/user/register', values).then(function (res) {\n        // console.log(res)\n        console.log(res.data);\n        if (res.data.code === '200') {\n          messageApi.info('注册成功');\n          // this.$message.success('注册成功')\n          switchRegister();\n        } else {\n          _this.$message.error('登录失败');\n        }\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n      console.log(isReg);\n    };\n    return {\n      formState: formState,\n      rules: rules,\n      onReg: onReg,\n      onFinish: onFinish,\n      onFinishFailed: onFinishFailed,\n      onRegister: onRegister,\n      switchRegister: switchRegister\n    };\n  }\n});","map":{"version":3,"names":["computed","defineComponent","reactive","ref","axios","useStore","useRouter","useRoute","message","setup","_this","_message$useMessage","useMessage","_message$useMessage2","_slicedToArray","messageApi","contextholder","isReg","onReg","get","set","value","store","router","formState","username","password","rememberMe","rules","required","trigger","min","max","onFinish","values","console","log","post","then","res","data","code","jwt","commit","push","$message","error","err","onFinishFailed","errorInfo","switchRegister","onRegister","info"],"sources":["C:\\Users\\zhouy\\WebstormProjects\\lingo\\src\\view\\Sign-in2.vue"],"sourcesContent":["<template>\r\n  <div class=\"content sign-in\">\r\n    <div v-if=\"!onReg.value\" class=\"box\">\r\n      <div class=\"left\">\r\n        <div class=\"block\">\r\n          <div class=\"text\">\r\n            <div class=\"one-text\">\r\n              <div>\r\n                <div class=\"triangle\"></div>\r\n                <span class=\"maos\">Maos</span>\r\n              </div>\r\n              <div>platform</div>\r\n              <div>for front-end</div>\r\n              <div>learning</div>\r\n            </div>\r\n            <div class=\"two-text\">\r\n              <div>You will know everything.</div>\r\n              <div>But you will more.</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <div class=\"login-box\">\r\n          <div class=\"title\">\r\n<!--            <h1 class=\"h1\">Sign In</h1>-->\r\n<!--            <span class=\"fuck font-regular \">Enter your email and password to sign in</span>-->\r\n          </div>\r\n                    <!-- Sign In Form -->\r\n          <a-form\r\n              id=\"components-form-demo-normal-login\"\r\n              :model=\"formState\"\r\n              class=\"login-form\"\r\n              :rules=\"rules\"\r\n              :hideRequiredMark=\"true\"\r\n              autocomplete=\"off\"\r\n              @finish=\"onFinish\"\r\n              @finishFailed=\"onFinishFailed\"\r\n          >\r\n            <label for=\"username\" class=\"form-item-label\">Email</label>\r\n\r\n            <a-form-item\r\n              name =\"username\"\r\n              id=\"form-item\"\r\n            >\r\n              <a-input\r\n                  v-model:value=\"formState.username\"\r\n                  id=\"username\"\r\n                  class=\"input\"\r\n                  placeholder=\"Email\"\r\n              />\r\n            </a-form-item>\r\n            <label for=\"password\" class=\"form-item-label\">Password</label>\r\n\r\n            <a-form-item\r\n                name =\"password\"\r\n                >\r\n              <a-input-password\r\n                  v-model:value=\"formState.password\"\r\n                  id=\"password\"\r\n                  class=\"input\"\r\n                  placeholder=\"Password\"\r\n              />\r\n            </a-form-item>\r\n            <a-form-item class=\"mb-10\">\r\n              <a-switch id=\"remember\" v-model:checked=\"formState.rememberMe\" /> Remember Me\r\n            </a-form-item>\r\n            <a-form-item>\r\n              <a-button type=\"primary\" block html-type=\"submit\" class=\"login-form-button login-btn\">\r\n                SIGN IN\r\n              </a-button>\r\n            </a-form-item>\r\n          </a-form>\r\n          <!-- / Sign In Form -->\r\n          <div class=\"other-login\">\r\n            <p class=\"font-regular\" @click=\"switchRegister\">Don't have an account? </p>\r\n\r\n            <div class=\"other-login-wrapper\">\r\n              <div class=\"other-login-item\">\r\n                <img class=\"google-login\" src=\"/images/QQ.png\" alt=\"QQLogin\">\r\n                <span>Sign in with QQ</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        </div>\r\n    <div v-if=\"onReg.value\" class=\"register-box\">\r\n      <div class=\"left\">\r\n        <div class=\"block\">\r\n          <div class=\"text\">\r\n            <div class=\"one-text\">\r\n              <div>\r\n                <div class=\"triangle\"></div>\r\n                <span class=\"maos\">Maos</span>\r\n              </div>\r\n              <div>platform</div>\r\n              <div>for front-end</div>\r\n              <div>learning</div>\r\n            </div>\r\n            <div class=\"two-text\">\r\n              <div>You will know everything.</div>\r\n              <div>But you will more.</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <div class=\"login-box\">\r\n          <div class=\"title\">\r\n            <!--            <h1 class=\"h1\">Sign In</h1>-->\r\n            <!--            <span class=\"fuck font-regular \">Enter your email and password to sign in</span>-->\r\n          </div>\r\n          <!-- Sign In Form -->\r\n          <a-form\r\n              id=\"components-form-demo-normal-login\"\r\n              :model=\"formState\"\r\n              class=\"login-form\"\r\n              :rules=\"rules\"\r\n              :hideRequiredMark=\"true\"\r\n              autocomplete=\"off\"\r\n              @finish=\"onRegister\"\r\n              @finishFailed=\"onFinishFailed\"\r\n          >\r\n            <label for=\"username\" class=\"form-item-label\">Email</label>\r\n\r\n            <a-form-item\r\n                name =\"username\"\r\n                id=\"form-item\"\r\n            >\r\n              <a-input\r\n                  v-model:value=\"formState.username\"\r\n                  id=\"username\"\r\n                  class=\"input\"\r\n                  placeholder=\"Email\"\r\n              />\r\n            </a-form-item>\r\n            <label for=\"password\" class=\"form-item-label\">Password</label>\r\n\r\n            <a-form-item\r\n                name =\"password\"\r\n            >\r\n              <a-input-password\r\n                  v-model:value=\"formState.password\"\r\n                  id=\"password\"\r\n                  class=\"input\"\r\n                  placeholder=\"Password\"\r\n              />\r\n            </a-form-item>\r\n            <a-form-item>\r\n              <a-button type=\"primary\" block html-type=\"submit\" class=\"login-form-button login-btn\">\r\n                REGISTER\r\n              </a-button>\r\n            </a-form-item>\r\n          </a-form>\r\n          <!-- / Sign In Form -->\r\n          <div class=\"other-login\">\r\n\r\n            <div class=\"other-login-wrapper\">\r\n              <div class=\"other-login-item\">\r\n                <img class=\"google-login\" src=\"/images/QQ.png\" alt=\"QQLogin\">\r\n                <span>Sign in with QQ</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n      </div>\r\n</template>\r\n\r\n<script>\r\nimport {computed, defineComponent, reactive, ref} from 'vue';\r\nimport axios from \"@/axios\";\r\nimport { useStore } from 'vuex';\r\nimport {useRouter,useRoute} from \"vue-router\";\r\nimport {message} from \"ant-design-vue\";\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    const [messageApi,contextholder] = message.useMessage();\r\n    const isReg = ref(false);\r\n    const onReg = computed({\r\n      get:()=>isReg,\r\n      set:()=>{\r\n        isReg.value = !isReg.value\r\n      }\r\n    })\r\n    const store = useStore();\r\n    const router = useRouter();\r\n    // const isRegister = reactive({\r\n    //    isReg:false,\r\n    // });\r\n    const formState = reactive({\r\n      username: 'oruert',\r\n      password: '321',\r\n      rememberMe: false,\r\n    });\r\n    const rules = reactive({\r\n      username: [\r\n        { required: true, message: '请输入用户名', trigger: 'blur' },\r\n        { min: 3, max: 15, message: '长度在 3 到 15 个字符', trigger: 'blur' }\r\n      ],\r\n      password: [\r\n        { required: true, message: '请选择密码', trigger: 'change' }\r\n      ]\r\n    });\r\n    const onFinish = values => {\r\n      console.log('Success:', values.username)\r\n\r\n      axios.post('/user/login',values).then(res=>{\r\n        // console.log(res)\r\n        console.log(res.data)\r\n        if(res.data.code === '200'){\r\n          const jwt = res.data.data;\r\n          console.log(\"jwt\",jwt)\r\n\r\n          // 把数据共享出去\r\n          store.commit(\"SET_TOKEN\", jwt)\r\n          // 获取\r\n          router.push('/home')\r\n        }else{\r\n          this.$message.error('登录失败')\r\n        }\r\n      }).catch(err=>{\r\n        console.log(err)\r\n      })\r\n    };\r\n    const onFinishFailed = errorInfo => {\r\n      console.log('Failed:', errorInfo);\r\n    };\r\n    const switchRegister = ()=>{\r\n      isReg.value = !isReg.value;\r\n      console.log(isReg)\r\n    };\r\n    const onRegister = values=>{\r\n      axios.post('/user/register',values).then(res=>{\r\n        // console.log(res)\r\n        console.log(res.data)\r\n        if(res.data.code === '200'){\r\n          messageApi.info('注册成功')\r\n          // this.$message.success('注册成功')\r\n          switchRegister()\r\n        }else{\r\n          this.$message.error('登录失败')\r\n        }\r\n      }).catch(err=>{\r\n        console.log(err)\r\n      })\r\n      console.log(isReg)\r\n    };\r\n    return {\r\n      formState,\r\n      rules,\r\n      onReg,\r\n      onFinish,\r\n      onFinishFailed,\r\n      onRegister,\r\n      switchRegister,\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n  @import \"../scss/pages/_sign-in2.scss\";\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}