{"ast":null,"code":"import \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport { warning } from '../../../vc-util/warning';\nimport { ref } from 'vue';\n/**\n * Keep input cursor in the correct position if possible.\n * Is this necessary since we have `formatter` which may mass the content?\n */\nexport default function useCursor(inputRef, focused) {\n  var selectionRef = ref(null);\n  function recordCursor() {\n    // Record position\n    try {\n      var _inputRef$value = inputRef.value,\n        start = _inputRef$value.selectionStart,\n        end = _inputRef$value.selectionEnd,\n        value = _inputRef$value.value;\n      var beforeTxt = value.substring(0, start);\n      var afterTxt = value.substring(end);\n      selectionRef.value = {\n        start: start,\n        end: end,\n        value: value,\n        beforeTxt: beforeTxt,\n        afterTxt: afterTxt\n      };\n    } catch (e) {\n      // Fix error in Chrome:\n      // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n      // http://stackoverflow.com/q/21177489/3040605\n    }\n  }\n  /**\n   * Restore logic:\n   *  1. back string same\n   *  2. start string same\n   */\n  function restoreCursor() {\n    if (inputRef.value && selectionRef.value && focused.value) {\n      try {\n        var value = inputRef.value.value;\n        var _selectionRef$value = selectionRef.value,\n          beforeTxt = _selectionRef$value.beforeTxt,\n          afterTxt = _selectionRef$value.afterTxt,\n          start = _selectionRef$value.start;\n        var startPos = value.length;\n        if (value.endsWith(afterTxt)) {\n          startPos = value.length - selectionRef.value.afterTxt.length;\n        } else if (value.startsWith(beforeTxt)) {\n          startPos = beforeTxt.length;\n        } else {\n          var beforeLastChar = beforeTxt[start - 1];\n          var newIndex = value.indexOf(beforeLastChar, start - 1);\n          if (newIndex !== -1) {\n            startPos = newIndex + 1;\n          }\n        }\n        inputRef.value.setSelectionRange(startPos, startPos);\n      } catch (e) {\n        warning(false, \"Something warning of cursor restore. Please fire issue about this: \".concat(e.message));\n      }\n    }\n  }\n  return [recordCursor, restoreCursor];\n}","map":{"version":3,"names":["warning","ref","useCursor","inputRef","focused","selectionRef","recordCursor","_inputRef$value","value","start","selectionStart","end","selectionEnd","beforeTxt","substring","afterTxt","e","restoreCursor","_selectionRef$value","startPos","length","endsWith","startsWith","beforeLastChar","newIndex","indexOf","setSelectionRange","concat","message"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/input-number/src/hooks/useCursor.js"],"sourcesContent":["import { warning } from '../../../vc-util/warning';\nimport { ref } from 'vue';\n/**\n * Keep input cursor in the correct position if possible.\n * Is this necessary since we have `formatter` which may mass the content?\n */\nexport default function useCursor(inputRef, focused) {\n  const selectionRef = ref(null);\n  function recordCursor() {\n    // Record position\n    try {\n      const {\n        selectionStart: start,\n        selectionEnd: end,\n        value\n      } = inputRef.value;\n      const beforeTxt = value.substring(0, start);\n      const afterTxt = value.substring(end);\n      selectionRef.value = {\n        start,\n        end,\n        value,\n        beforeTxt,\n        afterTxt\n      };\n    } catch (e) {\n      // Fix error in Chrome:\n      // Failed to read the 'selectionStart' property from 'HTMLInputElement'\n      // http://stackoverflow.com/q/21177489/3040605\n    }\n  }\n  /**\n   * Restore logic:\n   *  1. back string same\n   *  2. start string same\n   */\n  function restoreCursor() {\n    if (inputRef.value && selectionRef.value && focused.value) {\n      try {\n        const {\n          value\n        } = inputRef.value;\n        const {\n          beforeTxt,\n          afterTxt,\n          start\n        } = selectionRef.value;\n        let startPos = value.length;\n        if (value.endsWith(afterTxt)) {\n          startPos = value.length - selectionRef.value.afterTxt.length;\n        } else if (value.startsWith(beforeTxt)) {\n          startPos = beforeTxt.length;\n        } else {\n          const beforeLastChar = beforeTxt[start - 1];\n          const newIndex = value.indexOf(beforeLastChar, start - 1);\n          if (newIndex !== -1) {\n            startPos = newIndex + 1;\n          }\n        }\n        inputRef.value.setSelectionRange(startPos, startPos);\n      } catch (e) {\n        warning(false, `Something warning of cursor restore. Please fire issue about this: ${e.message}`);\n      }\n    }\n  }\n  return [recordCursor, restoreCursor];\n}"],"mappings":";;;AAAA,SAASA,OAAO,QAAQ,0BAA0B;AAClD,SAASC,GAAG,QAAQ,KAAK;AACzB;AACA;AACA;AACA;AACA,eAAe,SAASC,SAASA,CAACC,QAAQ,EAAEC,OAAO,EAAE;EACnD,IAAMC,YAAY,GAAGJ,GAAG,CAAC,IAAI,CAAC;EAC9B,SAASK,YAAYA,CAAA,EAAG;IACtB;IACA,IAAI;MACF,IAAAC,eAAA,GAIIJ,QAAQ,CAACK,KAAK;QAHAC,KAAK,GAAAF,eAAA,CAArBG,cAAc;QACAC,GAAG,GAAAJ,eAAA,CAAjBK,YAAY;QACZJ,KAAK,GAAAD,eAAA,CAALC,KAAK;MAEP,IAAMK,SAAS,GAAGL,KAAK,CAACM,SAAS,CAAC,CAAC,EAAEL,KAAK,CAAC;MAC3C,IAAMM,QAAQ,GAAGP,KAAK,CAACM,SAAS,CAACH,GAAG,CAAC;MACrCN,YAAY,CAACG,KAAK,GAAG;QACnBC,KAAK,EAALA,KAAK;QACLE,GAAG,EAAHA,GAAG;QACHH,KAAK,EAALA,KAAK;QACLK,SAAS,EAATA,SAAS;QACTE,QAAQ,EAARA;MACF,CAAC;IACH,CAAC,CAAC,OAAOC,CAAC,EAAE;MACV;MACA;MACA;IAAA;EAEJ;EACA;AACF;AACA;AACA;AACA;EACE,SAASC,aAAaA,CAAA,EAAG;IACvB,IAAId,QAAQ,CAACK,KAAK,IAAIH,YAAY,CAACG,KAAK,IAAIJ,OAAO,CAACI,KAAK,EAAE;MACzD,IAAI;QACF,IACEA,KAAK,GACHL,QAAQ,CAACK,KAAK,CADhBA,KAAK;QAEP,IAAAU,mBAAA,GAIIb,YAAY,CAACG,KAAK;UAHpBK,SAAS,GAAAK,mBAAA,CAATL,SAAS;UACTE,QAAQ,GAAAG,mBAAA,CAARH,QAAQ;UACRN,KAAK,GAAAS,mBAAA,CAALT,KAAK;QAEP,IAAIU,QAAQ,GAAGX,KAAK,CAACY,MAAM;QAC3B,IAAIZ,KAAK,CAACa,QAAQ,CAACN,QAAQ,CAAC,EAAE;UAC5BI,QAAQ,GAAGX,KAAK,CAACY,MAAM,GAAGf,YAAY,CAACG,KAAK,CAACO,QAAQ,CAACK,MAAM;QAC9D,CAAC,MAAM,IAAIZ,KAAK,CAACc,UAAU,CAACT,SAAS,CAAC,EAAE;UACtCM,QAAQ,GAAGN,SAAS,CAACO,MAAM;QAC7B,CAAC,MAAM;UACL,IAAMG,cAAc,GAAGV,SAAS,CAACJ,KAAK,GAAG,CAAC,CAAC;UAC3C,IAAMe,QAAQ,GAAGhB,KAAK,CAACiB,OAAO,CAACF,cAAc,EAAEd,KAAK,GAAG,CAAC,CAAC;UACzD,IAAIe,QAAQ,KAAK,CAAC,CAAC,EAAE;YACnBL,QAAQ,GAAGK,QAAQ,GAAG,CAAC;UACzB;QACF;QACArB,QAAQ,CAACK,KAAK,CAACkB,iBAAiB,CAACP,QAAQ,EAAEA,QAAQ,CAAC;MACtD,CAAC,CAAC,OAAOH,CAAC,EAAE;QACVhB,OAAO,CAAC,KAAK,wEAAA2B,MAAA,CAAwEX,CAAC,CAACY,OAAO,CAAE,CAAC;MACnG;IACF;EACF;EACA,OAAO,CAACtB,YAAY,EAAEW,aAAa,CAAC;AACtC"},"metadata":{},"sourceType":"module","externalDependencies":[]}