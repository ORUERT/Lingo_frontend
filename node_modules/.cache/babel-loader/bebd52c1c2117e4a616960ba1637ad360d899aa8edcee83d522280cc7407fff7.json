{"ast":null,"code":"import _slicedToArray from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _typeof from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport { nextTick, defineComponent, ref, computed, onMounted, onUpdated, watch, onUnmounted } from 'vue';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { cloneElement } from '../_util/vnode';\nimport isVisible from '../vc-util/Dom/isVisible';\nimport { isSamePoint, restoreFocus, monitorResize } from './util';\nimport useBuffer from './hooks/useBuffer';\nimport isEqual from 'lodash-es/isEqual';\nexport var alignProps = {\n  align: Object,\n  target: [Object, Function],\n  onAlign: Function,\n  monitorBufferTime: Number,\n  monitorWindowResize: Boolean,\n  disabled: Boolean\n};\nfunction getElement(func) {\n  if (typeof func !== 'function') return null;\n  return func();\n}\nfunction getPoint(point) {\n  if (_typeof(point) !== 'object' || !point) return null;\n  return point;\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Align',\n  props: alignProps,\n  emits: ['align'],\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n      slots = _ref.slots;\n    var cacheRef = ref({});\n    var nodeRef = ref();\n    var _useBuffer = useBuffer(function () {\n        var latestDisabled = props.disabled,\n          latestTarget = props.target,\n          latestAlign = props.align,\n          latestOnAlign = props.onAlign;\n        if (!latestDisabled && latestTarget && nodeRef.value) {\n          var source = nodeRef.value;\n          var result;\n          var element = getElement(latestTarget);\n          var point = getPoint(latestTarget);\n          cacheRef.value.element = element;\n          cacheRef.value.point = point;\n          cacheRef.value.align = latestAlign;\n          // IE lose focus after element realign\n          // We should record activeElement and restore later\n          var _document = document,\n            activeElement = _document.activeElement;\n          // We only align when element is visible\n          if (element && isVisible(element)) {\n            result = alignElement(source, element, latestAlign);\n          } else if (point) {\n            result = alignPoint(source, point, latestAlign);\n          }\n          restoreFocus(activeElement, source);\n          if (latestOnAlign && result) {\n            latestOnAlign(source, result);\n          }\n          return true;\n        }\n        return false;\n      }, computed(function () {\n        return props.monitorBufferTime;\n      })),\n      _useBuffer2 = _slicedToArray(_useBuffer, 2),\n      _forceAlign = _useBuffer2[0],\n      cancelForceAlign = _useBuffer2[1];\n    // ===================== Effect =====================\n    // Listen for target updated\n    var resizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n    // Listen for source updated\n    var sourceResizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n    var goAlign = function goAlign() {\n      var target = props.target;\n      var element = getElement(target);\n      var point = getPoint(target);\n      if (nodeRef.value !== sourceResizeMonitor.value.element) {\n        sourceResizeMonitor.value.cancel();\n        sourceResizeMonitor.value.element = nodeRef.value;\n        sourceResizeMonitor.value.cancel = monitorResize(nodeRef.value, _forceAlign);\n      }\n      if (cacheRef.value.element !== element || !isSamePoint(cacheRef.value.point, point) || !isEqual(cacheRef.value.align, props.align)) {\n        _forceAlign();\n        // Add resize observer\n        if (resizeMonitor.value.element !== element) {\n          resizeMonitor.value.cancel();\n          resizeMonitor.value.element = element;\n          resizeMonitor.value.cancel = monitorResize(element, _forceAlign);\n        }\n      }\n    };\n    onMounted(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    onUpdated(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    // Listen for disabled change\n    watch(function () {\n      return props.disabled;\n    }, function (disabled) {\n      if (!disabled) {\n        _forceAlign();\n      } else {\n        cancelForceAlign();\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n    // Listen for window resize\n    var winResizeRef = ref(null);\n    watch(function () {\n      return props.monitorWindowResize;\n    }, function (monitorWindowResize) {\n      if (monitorWindowResize) {\n        if (!winResizeRef.value) {\n          winResizeRef.value = addEventListener(window, 'resize', _forceAlign);\n        }\n      } else if (winResizeRef.value) {\n        winResizeRef.value.remove();\n        winResizeRef.value = null;\n      }\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(function () {\n      resizeMonitor.value.cancel();\n      sourceResizeMonitor.value.cancel();\n      if (winResizeRef.value) winResizeRef.value.remove();\n      cancelForceAlign();\n    });\n    expose({\n      forceAlign: function forceAlign() {\n        return _forceAlign(true);\n      }\n    });\n    return function () {\n      var child = slots === null || slots === void 0 ? void 0 : slots[\"default\"]();\n      if (child) {\n        return cloneElement(child[0], {\n          ref: nodeRef\n        }, true, true);\n      }\n      return null;\n    };\n  }\n});","map":{"version":3,"names":["nextTick","defineComponent","ref","computed","onMounted","onUpdated","watch","onUnmounted","alignElement","alignPoint","addEventListener","cloneElement","isVisible","isSamePoint","restoreFocus","monitorResize","useBuffer","isEqual","alignProps","align","Object","target","Function","onAlign","monitorBufferTime","Number","monitorWindowResize","Boolean","disabled","getElement","func","getPoint","point","_typeof","compatConfig","MODE","name","props","emits","setup","_ref","expose","slots","cacheRef","nodeRef","_useBuffer","latestDisabled","latestTarget","latestAlign","latestOnAlign","value","source","result","element","_document","document","activeElement","_useBuffer2","_slicedToArray","forceAlign","cancelForceAlign","resizeMonitor","cancel","sourceResizeMonitor","goAlign","immediate","flush","winResizeRef","window","remove","child"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/vc-align/Align.js"],"sourcesContent":["import { nextTick, defineComponent, ref, computed, onMounted, onUpdated, watch, onUnmounted } from 'vue';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { cloneElement } from '../_util/vnode';\nimport isVisible from '../vc-util/Dom/isVisible';\nimport { isSamePoint, restoreFocus, monitorResize } from './util';\nimport useBuffer from './hooks/useBuffer';\nimport isEqual from 'lodash-es/isEqual';\nexport const alignProps = {\n  align: Object,\n  target: [Object, Function],\n  onAlign: Function,\n  monitorBufferTime: Number,\n  monitorWindowResize: Boolean,\n  disabled: Boolean\n};\nfunction getElement(func) {\n  if (typeof func !== 'function') return null;\n  return func();\n}\nfunction getPoint(point) {\n  if (typeof point !== 'object' || !point) return null;\n  return point;\n}\nexport default defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Align',\n  props: alignProps,\n  emits: ['align'],\n  setup(props, _ref) {\n    let {\n      expose,\n      slots\n    } = _ref;\n    const cacheRef = ref({});\n    const nodeRef = ref();\n    const [forceAlign, cancelForceAlign] = useBuffer(() => {\n      const {\n        disabled: latestDisabled,\n        target: latestTarget,\n        align: latestAlign,\n        onAlign: latestOnAlign\n      } = props;\n      if (!latestDisabled && latestTarget && nodeRef.value) {\n        const source = nodeRef.value;\n        let result;\n        const element = getElement(latestTarget);\n        const point = getPoint(latestTarget);\n        cacheRef.value.element = element;\n        cacheRef.value.point = point;\n        cacheRef.value.align = latestAlign;\n        // IE lose focus after element realign\n        // We should record activeElement and restore later\n        const {\n          activeElement\n        } = document;\n        // We only align when element is visible\n        if (element && isVisible(element)) {\n          result = alignElement(source, element, latestAlign);\n        } else if (point) {\n          result = alignPoint(source, point, latestAlign);\n        }\n        restoreFocus(activeElement, source);\n        if (latestOnAlign && result) {\n          latestOnAlign(source, result);\n        }\n        return true;\n      }\n      return false;\n    }, computed(() => props.monitorBufferTime));\n    // ===================== Effect =====================\n    // Listen for target updated\n    const resizeMonitor = ref({\n      cancel: () => {}\n    });\n    // Listen for source updated\n    const sourceResizeMonitor = ref({\n      cancel: () => {}\n    });\n    const goAlign = () => {\n      const target = props.target;\n      const element = getElement(target);\n      const point = getPoint(target);\n      if (nodeRef.value !== sourceResizeMonitor.value.element) {\n        sourceResizeMonitor.value.cancel();\n        sourceResizeMonitor.value.element = nodeRef.value;\n        sourceResizeMonitor.value.cancel = monitorResize(nodeRef.value, forceAlign);\n      }\n      if (cacheRef.value.element !== element || !isSamePoint(cacheRef.value.point, point) || !isEqual(cacheRef.value.align, props.align)) {\n        forceAlign();\n        // Add resize observer\n        if (resizeMonitor.value.element !== element) {\n          resizeMonitor.value.cancel();\n          resizeMonitor.value.element = element;\n          resizeMonitor.value.cancel = monitorResize(element, forceAlign);\n        }\n      }\n    };\n    onMounted(() => {\n      nextTick(() => {\n        goAlign();\n      });\n    });\n    onUpdated(() => {\n      nextTick(() => {\n        goAlign();\n      });\n    });\n    // Listen for disabled change\n    watch(() => props.disabled, disabled => {\n      if (!disabled) {\n        forceAlign();\n      } else {\n        cancelForceAlign();\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    });\n    // Listen for window resize\n    const winResizeRef = ref(null);\n    watch(() => props.monitorWindowResize, monitorWindowResize => {\n      if (monitorWindowResize) {\n        if (!winResizeRef.value) {\n          winResizeRef.value = addEventListener(window, 'resize', forceAlign);\n        }\n      } else if (winResizeRef.value) {\n        winResizeRef.value.remove();\n        winResizeRef.value = null;\n      }\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(() => {\n      resizeMonitor.value.cancel();\n      sourceResizeMonitor.value.cancel();\n      if (winResizeRef.value) winResizeRef.value.remove();\n      cancelForceAlign();\n    });\n    expose({\n      forceAlign: () => forceAlign(true)\n    });\n    return () => {\n      const child = slots === null || slots === void 0 ? void 0 : slots.default();\n      if (child) {\n        return cloneElement(child[0], {\n          ref: nodeRef\n        }, true, true);\n      }\n      return null;\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}