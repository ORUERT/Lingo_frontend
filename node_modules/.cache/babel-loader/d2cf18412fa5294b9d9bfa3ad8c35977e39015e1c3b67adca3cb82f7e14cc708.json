{"ast":null,"code":"import _defineProperty from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { toArray } from '../utils/commonUtil';\nimport { injectPropsWithOption } from '../utils/valueUtil';\nimport { computed } from 'vue';\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\nexport default (function (options, fieldNames, searchValue, filterOption, optionFilterProp) {\n  return computed(function () {\n    var searchValueVal = searchValue.value;\n    var optionFilterPropValue = optionFilterProp === null || optionFilterProp === void 0 ? void 0 : optionFilterProp.value;\n    var filterOptionValue = filterOption === null || filterOption === void 0 ? void 0 : filterOption.value;\n    if (!searchValueVal || filterOptionValue === false) {\n      return options.value;\n    }\n    var _fieldNames$value = fieldNames.value,\n      fieldOptions = _fieldNames$value.options,\n      fieldLabel = _fieldNames$value.label,\n      fieldValue = _fieldNames$value.value;\n    var filteredOptions = [];\n    var customizeFilter = typeof filterOptionValue === 'function';\n    var upperSearch = searchValueVal.toUpperCase();\n    var filterFunc = customizeFilter ? filterOptionValue : function (_, option) {\n      // Use provided `optionFilterProp`\n      if (optionFilterPropValue) {\n        return includes(option[optionFilterPropValue], upperSearch);\n      }\n      // Auto select `label` or `value` by option type\n      if (option[fieldOptions]) {\n        // hack `fieldLabel` since `OptionGroup` children is not `label`\n        return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n      }\n      return includes(option[fieldValue], upperSearch);\n    };\n    var wrapOption = customizeFilter ? function (opt) {\n      return injectPropsWithOption(opt);\n    } : function (opt) {\n      return opt;\n    };\n    options.value.forEach(function (item) {\n      // Group should check child options\n      if (item[fieldOptions]) {\n        // Check group first\n        var matchGroup = filterFunc(searchValueVal, wrapOption(item));\n        if (matchGroup) {\n          filteredOptions.push(item);\n        } else {\n          // Check option\n          var subOptions = item[fieldOptions].filter(function (subItem) {\n            return filterFunc(searchValueVal, wrapOption(subItem));\n          });\n          if (subOptions.length) {\n            filteredOptions.push(_extends(_extends({}, item), _defineProperty({}, fieldOptions, subOptions)));\n          }\n        }\n        return;\n      }\n      if (filterFunc(searchValueVal, wrapOption(item))) {\n        filteredOptions.push(item);\n      }\n    });\n    return filteredOptions;\n  });\n});","map":{"version":3,"names":["_extends","toArray","injectPropsWithOption","computed","includes","test","search","join","toUpperCase","options","fieldNames","searchValue","filterOption","optionFilterProp","searchValueVal","value","optionFilterPropValue","filterOptionValue","_fieldNames$value","fieldOptions","fieldLabel","label","fieldValue","filteredOptions","customizeFilter","upperSearch","filterFunc","_","option","wrapOption","opt","forEach","item","matchGroup","push","subOptions","filter","subItem","length","_defineProperty"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/vc-select/hooks/useFilterOptions.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { toArray } from '../utils/commonUtil';\nimport { injectPropsWithOption } from '../utils/valueUtil';\nimport { computed } from 'vue';\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\nexport default ((options, fieldNames, searchValue, filterOption, optionFilterProp) => computed(() => {\n  const searchValueVal = searchValue.value;\n  const optionFilterPropValue = optionFilterProp === null || optionFilterProp === void 0 ? void 0 : optionFilterProp.value;\n  const filterOptionValue = filterOption === null || filterOption === void 0 ? void 0 : filterOption.value;\n  if (!searchValueVal || filterOptionValue === false) {\n    return options.value;\n  }\n  const {\n    options: fieldOptions,\n    label: fieldLabel,\n    value: fieldValue\n  } = fieldNames.value;\n  const filteredOptions = [];\n  const customizeFilter = typeof filterOptionValue === 'function';\n  const upperSearch = searchValueVal.toUpperCase();\n  const filterFunc = customizeFilter ? filterOptionValue : (_, option) => {\n    // Use provided `optionFilterProp`\n    if (optionFilterPropValue) {\n      return includes(option[optionFilterPropValue], upperSearch);\n    }\n    // Auto select `label` or `value` by option type\n    if (option[fieldOptions]) {\n      // hack `fieldLabel` since `OptionGroup` children is not `label`\n      return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n    }\n    return includes(option[fieldValue], upperSearch);\n  };\n  const wrapOption = customizeFilter ? opt => injectPropsWithOption(opt) : opt => opt;\n  options.value.forEach(item => {\n    // Group should check child options\n    if (item[fieldOptions]) {\n      // Check group first\n      const matchGroup = filterFunc(searchValueVal, wrapOption(item));\n      if (matchGroup) {\n        filteredOptions.push(item);\n      } else {\n        // Check option\n        const subOptions = item[fieldOptions].filter(subItem => filterFunc(searchValueVal, wrapOption(subItem)));\n        if (subOptions.length) {\n          filteredOptions.push(_extends(_extends({}, item), {\n            [fieldOptions]: subOptions\n          }));\n        }\n      }\n      return;\n    }\n    if (filterFunc(searchValueVal, wrapOption(item))) {\n      filteredOptions.push(item);\n    }\n  });\n  return filteredOptions;\n}));"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}