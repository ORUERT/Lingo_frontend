{"ast":null,"code":"import _defineProperty from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"C:/Users/zhouy/WebstormProjects/lingo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nimport KeyCode from '../_util/KeyCode';\nimport TextArea from '../input/TextArea';\nimport EnterOutlined from \"@ant-design/icons-vue/es/icons/EnterOutlined\";\nimport { defineComponent, ref, reactive, watch, onMounted, toRefs } from 'vue';\nimport classNames from '../_util/classNames';\n// CSSINJS\nimport useStyle from './style';\nvar editableProps = function editableProps() {\n  return {\n    prefixCls: String,\n    value: String,\n    maxlength: Number,\n    autoSize: {\n      type: [Boolean, Object]\n    },\n    onSave: Function,\n    onCancel: Function,\n    onEnd: Function,\n    onChange: Function,\n    originContent: String,\n    direction: String,\n    component: String\n  };\n};\nvar Editable = defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Editable',\n  inheritAttrs: false,\n  props: editableProps(),\n  // emits: ['save', 'cancel', 'end', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n      slots = _ref.slots,\n      attrs = _ref.attrs;\n    var _toRefs = toRefs(props),\n      prefixCls = _toRefs.prefixCls;\n    var state = reactive({\n      current: props.value || '',\n      lastKeyCode: undefined,\n      inComposition: false,\n      cancelFlag: false\n    });\n    watch(function () {\n      return props.value;\n    }, function (current) {\n      state.current = current;\n    });\n    var textArea = ref();\n    onMounted(function () {\n      var _a;\n      if (textArea.value) {\n        var resizableTextArea = (_a = textArea.value) === null || _a === void 0 ? void 0 : _a.resizableTextArea;\n        var innerTextArea = resizableTextArea === null || resizableTextArea === void 0 ? void 0 : resizableTextArea.textArea;\n        innerTextArea.focus();\n        var length = innerTextArea.value.length;\n        innerTextArea.setSelectionRange(length, length);\n      }\n    });\n    function saveTextAreaRef(node) {\n      textArea.value = node;\n    }\n    function onChange(_ref2) {\n      var value = _ref2.target.value;\n      state.current = value.replace(/[\\r\\n]/g, '');\n      emit('change', state.current);\n    }\n    function onCompositionStart() {\n      state.inComposition = true;\n    }\n    function onCompositionEnd() {\n      state.inComposition = false;\n    }\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n      if (keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n      }\n      // We don't record keyCode when IME is using\n      if (state.inComposition) return;\n      state.lastKeyCode = keyCode;\n    }\n    function onKeyUp(e) {\n      var keyCode = e.keyCode,\n        ctrlKey = e.ctrlKey,\n        altKey = e.altKey,\n        metaKey = e.metaKey,\n        shiftKey = e.shiftKey;\n      // Check if it's a real key\n      if (state.lastKeyCode === keyCode && !state.inComposition && !ctrlKey && !altKey && !metaKey && !shiftKey) {\n        if (keyCode === KeyCode.ENTER) {\n          confirmChange();\n          emit('end');\n        } else if (keyCode === KeyCode.ESC) {\n          state.current = props.originContent;\n          emit('cancel');\n        }\n      }\n    }\n    function onBlur() {\n      confirmChange();\n    }\n    function confirmChange() {\n      emit('save', state.current.trim());\n    }\n    // style\n    var _useStyle = useStyle(prefixCls),\n      _useStyle2 = _slicedToArray(_useStyle, 2),\n      wrapSSR = _useStyle2[0],\n      hashId = _useStyle2[1];\n    return function () {\n      var _classNames;\n      var textAreaClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls.value), true), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-edit-content\"), true), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-rtl\"), props.direction === 'rtl'), _defineProperty(_classNames, props.component ? \"\".concat(prefixCls.value, \"-\").concat(props.component) : '', true), _classNames), attrs[\"class\"], hashId.value);\n      return wrapSSR(_createVNode(\"div\", _objectSpread(_objectSpread({}, attrs), {}, {\n        \"class\": textAreaClassName\n      }), [_createVNode(TextArea, {\n        \"ref\": saveTextAreaRef,\n        \"maxlength\": props.maxlength,\n        \"value\": state.current,\n        \"onChange\": onChange,\n        \"onKeydown\": onKeyDown,\n        \"onKeyup\": onKeyUp,\n        \"onCompositionstart\": onCompositionStart,\n        \"onCompositionend\": onCompositionEnd,\n        \"onBlur\": onBlur,\n        \"rows\": 1,\n        \"autoSize\": props.autoSize === undefined || props.autoSize\n      }, null), slots.enterIcon ? slots.enterIcon({\n        className: \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }) : _createVNode(EnterOutlined, {\n        \"class\": \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }, null)]));\n    };\n  }\n});\nexport default Editable;","map":{"version":3,"names":["_objectSpread","createVNode","_createVNode","KeyCode","TextArea","EnterOutlined","defineComponent","ref","reactive","watch","onMounted","toRefs","classNames","useStyle","editableProps","prefixCls","String","value","maxlength","Number","autoSize","type","Boolean","Object","onSave","Function","onCancel","onEnd","onChange","originContent","direction","component","Editable","compatConfig","MODE","name","inheritAttrs","props","setup","_ref","emit","slots","attrs","_toRefs","state","current","lastKeyCode","undefined","inComposition","cancelFlag","textArea","_a","resizableTextArea","innerTextArea","focus","length","setSelectionRange","saveTextAreaRef","node","_ref2","target","replace","onCompositionStart","onCompositionEnd","onKeyDown","e","keyCode","ENTER","preventDefault","onKeyUp","ctrlKey","altKey","metaKey","shiftKey","confirmChange","ESC","onBlur","trim","_useStyle","_useStyle2","_slicedToArray","wrapSSR","hashId","_classNames","textAreaClassName","_defineProperty","concat","enterIcon","className"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/typography/Editable.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nimport KeyCode from '../_util/KeyCode';\nimport TextArea from '../input/TextArea';\nimport EnterOutlined from \"@ant-design/icons-vue/es/icons/EnterOutlined\";\nimport { defineComponent, ref, reactive, watch, onMounted, toRefs } from 'vue';\nimport classNames from '../_util/classNames';\n// CSSINJS\nimport useStyle from './style';\nconst editableProps = () => ({\n  prefixCls: String,\n  value: String,\n  maxlength: Number,\n  autoSize: {\n    type: [Boolean, Object]\n  },\n  onSave: Function,\n  onCancel: Function,\n  onEnd: Function,\n  onChange: Function,\n  originContent: String,\n  direction: String,\n  component: String\n});\nconst Editable = defineComponent({\n  compatConfig: {\n    MODE: 3\n  },\n  name: 'Editable',\n  inheritAttrs: false,\n  props: editableProps(),\n  // emits: ['save', 'cancel', 'end', 'change'],\n  setup(props, _ref) {\n    let {\n      emit,\n      slots,\n      attrs\n    } = _ref;\n    const {\n      prefixCls\n    } = toRefs(props);\n    const state = reactive({\n      current: props.value || '',\n      lastKeyCode: undefined,\n      inComposition: false,\n      cancelFlag: false\n    });\n    watch(() => props.value, current => {\n      state.current = current;\n    });\n    const textArea = ref();\n    onMounted(() => {\n      var _a;\n      if (textArea.value) {\n        const resizableTextArea = (_a = textArea.value) === null || _a === void 0 ? void 0 : _a.resizableTextArea;\n        const innerTextArea = resizableTextArea === null || resizableTextArea === void 0 ? void 0 : resizableTextArea.textArea;\n        innerTextArea.focus();\n        const {\n          length\n        } = innerTextArea.value;\n        innerTextArea.setSelectionRange(length, length);\n      }\n    });\n    function saveTextAreaRef(node) {\n      textArea.value = node;\n    }\n    function onChange(_ref2) {\n      let {\n        target: {\n          value\n        }\n      } = _ref2;\n      state.current = value.replace(/[\\r\\n]/g, '');\n      emit('change', state.current);\n    }\n    function onCompositionStart() {\n      state.inComposition = true;\n    }\n    function onCompositionEnd() {\n      state.inComposition = false;\n    }\n    function onKeyDown(e) {\n      const {\n        keyCode\n      } = e;\n      if (keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n      }\n      // We don't record keyCode when IME is using\n      if (state.inComposition) return;\n      state.lastKeyCode = keyCode;\n    }\n    function onKeyUp(e) {\n      const {\n        keyCode,\n        ctrlKey,\n        altKey,\n        metaKey,\n        shiftKey\n      } = e;\n      // Check if it's a real key\n      if (state.lastKeyCode === keyCode && !state.inComposition && !ctrlKey && !altKey && !metaKey && !shiftKey) {\n        if (keyCode === KeyCode.ENTER) {\n          confirmChange();\n          emit('end');\n        } else if (keyCode === KeyCode.ESC) {\n          state.current = props.originContent;\n          emit('cancel');\n        }\n      }\n    }\n    function onBlur() {\n      confirmChange();\n    }\n    function confirmChange() {\n      emit('save', state.current.trim());\n    }\n    // style\n    const [wrapSSR, hashId] = useStyle(prefixCls);\n    return () => {\n      const textAreaClassName = classNames({\n        [`${prefixCls.value}`]: true,\n        [`${prefixCls.value}-edit-content`]: true,\n        [`${prefixCls.value}-rtl`]: props.direction === 'rtl',\n        [props.component ? `${prefixCls.value}-${props.component}` : '']: true\n      }, attrs.class, hashId.value);\n      return wrapSSR(_createVNode(\"div\", _objectSpread(_objectSpread({}, attrs), {}, {\n        \"class\": textAreaClassName\n      }), [_createVNode(TextArea, {\n        \"ref\": saveTextAreaRef,\n        \"maxlength\": props.maxlength,\n        \"value\": state.current,\n        \"onChange\": onChange,\n        \"onKeydown\": onKeyDown,\n        \"onKeyup\": onKeyUp,\n        \"onCompositionstart\": onCompositionStart,\n        \"onCompositionend\": onCompositionEnd,\n        \"onBlur\": onBlur,\n        \"rows\": 1,\n        \"autoSize\": props.autoSize === undefined || props.autoSize\n      }, null), slots.enterIcon ? slots.enterIcon({\n        className: `${props.prefixCls}-edit-content-confirm`\n      }) : _createVNode(EnterOutlined, {\n        \"class\": `${props.prefixCls}-edit-content-confirm`\n      }, null)]));\n    };\n  }\n});\nexport default Editable;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}