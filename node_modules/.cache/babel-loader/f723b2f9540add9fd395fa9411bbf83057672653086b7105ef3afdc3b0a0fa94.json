{"ast":null,"code":"import { MessageOutlined } from '@ant-design/icons-vue';\nimport axios from \"@/axios\";\nimport { defineComponent } from \"vue\";\n// import request from \"@/utils/request\";\n// let socket;\nexport default defineComponent({\n  setup: function setup() {} // components: {\n  //   MessageOutlined\n  // },\n  //\n  // data() {\n  //   return {\n  //     circleUrl: 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png',\n  //     user: {},\n  //     isCollapse: false,\n  //     users: [],\n  //     chatUser: '',\n  //     text: \"\",\n  //     messages: [],\n  //     content: ''\n  //   }\n  // },\n  // computed: {\n  //   isTextEmpty() {\n  //     return this.text.length === 0; // 判断文本是否为空\n  //   }\n  // },\n  // created() {\n  //   this.init()\n  // },\n  // methods: {\n  //   onck() {\n  //     console.log('onck')\n  //   },\n  //   send() {\n  //     if (typeof (WebSocket) == \"undefined\") {\n  //       console.log(\"您的浏览器不支持WebSocket\");\n  //     } else {\n  //       console.log(\"您的浏览器支持WebSocket\");\n  //       // 组装待发送的消息 json\n  //       // {\"from\": \"zhang\", \"to\": \"admin\", \"text\": \"聊天文本\"}\n  //       let message = {from: this.user.username, to: this.chatUser, text: this.text}\n  //       axios.post('/message',message,{\n  //         headers:{\n  //           'Content-Type':'application/json',\n  //           'Authorization':localStorage.getItem('token')\n  //         }\n  //       }).then(res=>{\n  //         if(res.data.status === 100){\n  //           //create message\n  //           // socket.send(JSON.stringify(message));  // 将组装好的json发送给服务端，由服务端进行转发\n  //           this.messages.push({user: this.user.username, text: this.text})\n  //           // 构建消息内容，本人消息\n  //           this.createContent(null, this.user.username, this.text)\n  //           this.text = '';\n  //         }else{\n  //           //create error message\n  //           // this.$message.error('登录失败')\n  //         }\n  //       }).catch(err=>{\n  //         console.log(err)\n  //       })\n  //     }\n  //   },\n  //   createContent(remoteUser, nowUser, text) {  // 这个方法是用来将 json的聊天消息数据转换成 html的。\n  //     let html\n  //     // 当前用户消息\n  //     if (nowUser) { // nowUser 表示是否显示当前用户发送的聊天消息，绿色气泡\n  //       html = \"<div class=\\\"a-row\\\" style=\\\"padding: 5px 0\\\">\\n\" +\n  //           \"  <div class=\\\"a-col a-col-22\\\" style=\\\"text-align: right; padding-right: 10px\\\">\\n\" +\n  //           \"    <div class=\\\"tip left\\\">\" + text + \"</div>\\n\" +\n  //           \"  </div>\\n\" +\n  //           \"  <div class=\\\"a-col a-col-2\\\">\\n\" +\n  //           \"  <span class=\\\"a-avatar a-avatar--circle\\\" style=\\\"height: 40px; width: 40px; line-height: 40px;\\\">\\n\" +\n  //           \"    <img src=\\\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\\\" style=\\\"object-fit: cover;\\\">\\n\" +\n  //           \"  </span>\\n\" +\n  //           \"  </div>\\n\" +\n  //           \"</div>\";\n  //     } else if (remoteUser) {   // remoteUser表示远程用户聊天消息，蓝色的气泡\n  //       html = \"<div class=\\\"a-row\\\" style=\\\"padding: 5px 0\\\">\\n\" +\n  //           \"  <div class=\\\"a-col a-col-2\\\" style=\\\"text-align: right\\\">\\n\" +\n  //           \"  <span class=\\\"a-avatar a-avatar--circle\\\" style=\\\"height: 40px; width: 40px; line-height: 40px;\\\">\\n\" +\n  //           \"    <img src=\\\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\\\" style=\\\"object-fit: cover;\\\">\\n\" +\n  //           \"  </span>\\n\" +\n  //           \"  </div>\\n\" +\n  //           \"  <div class=\\\"a-col a-col-22\\\" style=\\\"text-align: left; padding-left: 10px\\\">\\n\" +\n  //           \"    <div class=\\\"tip right\\\">\" + text + \"</div>\\n\" +\n  //           \"  </div>\\n\" +\n  //           \"</div>\";\n  //     }\n  //     console.log(html)\n  //     this.content += html;\n  //   },\n  //   init() {\n  //     this.user = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n  //     let username = this.user.username;\n  //     let _this = this;\n  //     if (typeof (WebSocket) == \"undefined\") {\n  //       console.log(\"您的浏览器不支持WebSocket\");\n  //     } else {\n  //       console.log(\"您的浏览器支持WebSocket\");\n  //       let socketUrl = \"ws://localhost:9090/imserver/\" + username;\n  //\n  //     }\n  //   }\n  // }\n});","map":{"version":3,"names":["MessageOutlined","axios","defineComponent","setup"],"sources":["C:\\Users\\zhouy\\WebstormProjects\\lingo\\src\\view\\ChatWindow.vue"],"sourcesContent":["<template>\r\n  <div  style=\"padding: 10px; margin-bottom: 50px\">\r\n    <a-row >\r\n      <a-col class=\"chat-col\" :span=\"16\">\r\n        <div class=\"chat-box\">\r\n          <div class=\"chat-title\">\r\n            Web聊天室（{{ chatUser }}）\r\n          </div>\r\n          <div class=\"chat-content\" v-html=\"content\"></div>\r\n          <div class=\"chat-input\">\r\n            <a-input-group >\r\n              <a-input class=\"chat-a-input\" v-model:value=\"text\" size=\"small\">\r\n                <template #suffix>\r\n                  <message-outlined :style=\"{fontSize: '20px', color: isTextEmpty ? '#808080' : '#000000'}\" @click=\"isTextEmpty ? null : onck\" />                </template>\r\n              </a-input>\r\n            </a-input-group>\r\n          </div>\r\n\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { MessageOutlined  } from '@ant-design/icons-vue';\r\nimport axios from \"@/axios\";\r\nimport {defineComponent} from \"vue\";\r\n// import request from \"@/utils/request\";\r\n// let socket;\r\nexport default defineComponent( {\r\n  setup(){\r\n    \r\n  }\r\n  // components: {\r\n  //   MessageOutlined\r\n  // },\r\n  //\r\n  // data() {\r\n  //   return {\r\n  //     circleUrl: 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png',\r\n  //     user: {},\r\n  //     isCollapse: false,\r\n  //     users: [],\r\n  //     chatUser: '',\r\n  //     text: \"\",\r\n  //     messages: [],\r\n  //     content: ''\r\n  //   }\r\n  // },\r\n  // computed: {\r\n  //   isTextEmpty() {\r\n  //     return this.text.length === 0; // 判断文本是否为空\r\n  //   }\r\n  // },\r\n  // created() {\r\n  //   this.init()\r\n  // },\r\n  // methods: {\r\n  //   onck() {\r\n  //     console.log('onck')\r\n  //   },\r\n  //   send() {\r\n  //     if (typeof (WebSocket) == \"undefined\") {\r\n  //       console.log(\"您的浏览器不支持WebSocket\");\r\n  //     } else {\r\n  //       console.log(\"您的浏览器支持WebSocket\");\r\n  //       // 组装待发送的消息 json\r\n  //       // {\"from\": \"zhang\", \"to\": \"admin\", \"text\": \"聊天文本\"}\r\n  //       let message = {from: this.user.username, to: this.chatUser, text: this.text}\r\n  //       axios.post('/message',message,{\r\n  //         headers:{\r\n  //           'Content-Type':'application/json',\r\n  //           'Authorization':localStorage.getItem('token')\r\n  //         }\r\n  //       }).then(res=>{\r\n  //         if(res.data.status === 100){\r\n  //           //create message\r\n  //           // socket.send(JSON.stringify(message));  // 将组装好的json发送给服务端，由服务端进行转发\r\n  //           this.messages.push({user: this.user.username, text: this.text})\r\n  //           // 构建消息内容，本人消息\r\n  //           this.createContent(null, this.user.username, this.text)\r\n  //           this.text = '';\r\n  //         }else{\r\n  //           //create error message\r\n  //           // this.$message.error('登录失败')\r\n  //         }\r\n  //       }).catch(err=>{\r\n  //         console.log(err)\r\n  //       })\r\n  //     }\r\n  //   },\r\n  //   createContent(remoteUser, nowUser, text) {  // 这个方法是用来将 json的聊天消息数据转换成 html的。\r\n  //     let html\r\n  //     // 当前用户消息\r\n  //     if (nowUser) { // nowUser 表示是否显示当前用户发送的聊天消息，绿色气泡\r\n  //       html = \"<div class=\\\"a-row\\\" style=\\\"padding: 5px 0\\\">\\n\" +\r\n  //           \"  <div class=\\\"a-col a-col-22\\\" style=\\\"text-align: right; padding-right: 10px\\\">\\n\" +\r\n  //           \"    <div class=\\\"tip left\\\">\" + text + \"</div>\\n\" +\r\n  //           \"  </div>\\n\" +\r\n  //           \"  <div class=\\\"a-col a-col-2\\\">\\n\" +\r\n  //           \"  <span class=\\\"a-avatar a-avatar--circle\\\" style=\\\"height: 40px; width: 40px; line-height: 40px;\\\">\\n\" +\r\n  //           \"    <img src=\\\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\\\" style=\\\"object-fit: cover;\\\">\\n\" +\r\n  //           \"  </span>\\n\" +\r\n  //           \"  </div>\\n\" +\r\n  //           \"</div>\";\r\n  //     } else if (remoteUser) {   // remoteUser表示远程用户聊天消息，蓝色的气泡\r\n  //       html = \"<div class=\\\"a-row\\\" style=\\\"padding: 5px 0\\\">\\n\" +\r\n  //           \"  <div class=\\\"a-col a-col-2\\\" style=\\\"text-align: right\\\">\\n\" +\r\n  //           \"  <span class=\\\"a-avatar a-avatar--circle\\\" style=\\\"height: 40px; width: 40px; line-height: 40px;\\\">\\n\" +\r\n  //           \"    <img src=\\\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\\\" style=\\\"object-fit: cover;\\\">\\n\" +\r\n  //           \"  </span>\\n\" +\r\n  //           \"  </div>\\n\" +\r\n  //           \"  <div class=\\\"a-col a-col-22\\\" style=\\\"text-align: left; padding-left: 10px\\\">\\n\" +\r\n  //           \"    <div class=\\\"tip right\\\">\" + text + \"</div>\\n\" +\r\n  //           \"  </div>\\n\" +\r\n  //           \"</div>\";\r\n  //     }\r\n  //     console.log(html)\r\n  //     this.content += html;\r\n  //   },\r\n  //   init() {\r\n  //     this.user = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\r\n  //     let username = this.user.username;\r\n  //     let _this = this;\r\n  //     if (typeof (WebSocket) == \"undefined\") {\r\n  //       console.log(\"您的浏览器不支持WebSocket\");\r\n  //     } else {\r\n  //       console.log(\"您的浏览器支持WebSocket\");\r\n  //       let socketUrl = \"ws://localhost:9090/imserver/\" + username;\r\n  //\r\n  //     }\r\n  //   }\r\n  // }\r\n})\r\n</script>\r\n<style>\r\n@import \"../scss/pages/_chat.scss\";\r\n</style>\r\n"],"mappings":"AAwBA,SAASA,eAAc,QAAU,uBAAuB;AACxD,OAAOC,KAAI,MAAO,SAAS;AAC3B,SAAQC,eAAe,QAAO,KAAK;AACnC;AACA;AACA,eAAeA,eAAe,CAAE;EAC9BC,KAAK,WAAAA,MAAA,EAAE,CAEP,EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}