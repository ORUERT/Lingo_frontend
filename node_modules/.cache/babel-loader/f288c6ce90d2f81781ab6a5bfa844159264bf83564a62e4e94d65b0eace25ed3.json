{"ast":null,"code":"import \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { addClass, removeClass } from '../../vc-util/Dom/class';\nimport { onBeforeUnmount, nextTick, Transition, watch, defineComponent, computed, ref } from 'vue';\nimport { anyType } from '../../_util/type';\nvar calcThumbStyle = function calcThumbStyle(targetElement) {\n  return targetElement ? {\n    left: targetElement.offsetLeft,\n    right: targetElement.parentElement.clientWidth - targetElement.clientWidth - targetElement.offsetLeft,\n    width: targetElement.clientWidth\n  } : null;\n};\nvar toPX = function toPX(value) {\n  return value !== undefined ? \"\".concat(value, \"px\") : undefined;\n};\nvar MotionThumb = defineComponent({\n  props: {\n    value: anyType(),\n    getValueIndex: anyType(),\n    prefixCls: anyType(),\n    motionName: anyType(),\n    onMotionStart: anyType(),\n    onMotionEnd: anyType(),\n    direction: anyType(),\n    containerRef: anyType()\n  },\n  emits: ['motionStart', 'motionEnd'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var thumbRef = ref();\n    // =========================== Effect ===========================\n    var findValueElement = function findValueElement(val) {\n      var _a;\n      var index = props.getValueIndex(val);\n      var ele = (_a = props.containerRef.value) === null || _a === void 0 ? void 0 : _a.querySelectorAll(\".\".concat(props.prefixCls, \"-item\"))[index];\n      return (ele === null || ele === void 0 ? void 0 : ele.offsetParent) && ele;\n    };\n    var prevStyle = ref(null);\n    var nextStyle = ref(null);\n    watch(function () {\n      return props.value;\n    }, function (value, prevValue) {\n      var prev = findValueElement(prevValue);\n      var next = findValueElement(value);\n      var calcPrevStyle = calcThumbStyle(prev);\n      var calcNextStyle = calcThumbStyle(next);\n      prevStyle.value = calcPrevStyle;\n      nextStyle.value = calcNextStyle;\n      if (prev && next) {\n        emit('motionStart');\n      } else {\n        emit('motionEnd');\n      }\n    }, {\n      flush: 'post'\n    });\n    var thumbStart = computed(function () {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = prevStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    var thumbActive = computed(function () {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = nextStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    // =========================== Motion ===========================\n    var timeid;\n    var onAppearStart = function onAppearStart(el) {\n      clearTimeout(timeid);\n      nextTick(function () {\n        if (el) {\n          el.style.transform = \"translateX(var(--thumb-start-left))\";\n          el.style.width = \"var(--thumb-start-width)\";\n        }\n      });\n    };\n    var onAppearActive = function onAppearActive(el) {\n      timeid = setTimeout(function () {\n        if (el) {\n          addClass(el, \"\".concat(props.motionName, \"-appear-active\"));\n          el.style.transform = \"translateX(var(--thumb-active-left))\";\n          el.style.width = \"var(--thumb-active-width)\";\n        }\n      });\n    };\n    var onAppearEnd = function onAppearEnd(el) {\n      prevStyle.value = null;\n      nextStyle.value = null;\n      if (el) {\n        el.style.transform = null;\n        el.style.width = null;\n        removeClass(el, \"\".concat(props.motionName, \"-appear-active\"));\n      }\n      emit('motionEnd');\n    };\n    var mergedStyle = computed(function () {\n      var _a, _b;\n      return {\n        '--thumb-start-left': thumbStart.value,\n        '--thumb-start-width': toPX((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.width),\n        '--thumb-active-left': thumbActive.value,\n        '--thumb-active-width': toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.width)\n      };\n    });\n    onBeforeUnmount(function () {\n      clearTimeout(timeid);\n    });\n    return function () {\n      // It's little ugly which should be refactor when @umi/test update to latest jsdom\n      var motionProps = {\n        ref: thumbRef,\n        style: mergedStyle.value,\n        \"class\": [\"\".concat(props.prefixCls, \"-thumb\")]\n      };\n      if (process.env.NODE_ENV === 'test') {\n        motionProps['data-test-style'] = JSON.stringify(mergedStyle.value);\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"onBeforeEnter\": onAppearStart,\n        \"onEnter\": onAppearActive,\n        \"onAfterEnter\": onAppearEnd\n      }, {\n        \"default\": function _default() {\n          return [!prevStyle.value || !nextStyle.value ? null : _createVNode(\"div\", motionProps, null)];\n        }\n      });\n    };\n  }\n});\nexport default MotionThumb;","map":{"version":3,"names":["createVNode","_createVNode","addClass","removeClass","onBeforeUnmount","nextTick","Transition","watch","defineComponent","computed","ref","anyType","calcThumbStyle","targetElement","left","offsetLeft","right","parentElement","clientWidth","width","toPX","value","undefined","concat","MotionThumb","props","getValueIndex","prefixCls","motionName","onMotionStart","onMotionEnd","direction","containerRef","emits","setup","_ref","emit","thumbRef","findValueElement","val","_a","index","ele","querySelectorAll","offsetParent","prevStyle","nextStyle","prevValue","prev","next","calcPrevStyle","calcNextStyle","flush","thumbStart","_b","thumbActive","timeid","onAppearStart","el","clearTimeout","style","transform","onAppearActive","setTimeout","onAppearEnd","mergedStyle","motionProps","process","env","NODE_ENV","JSON","stringify","_default"],"sources":["C:/Users/zhouy/WebstormProjects/lingo/node_modules/ant-design-vue/es/segmented/src/MotionThumb.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { addClass, removeClass } from '../../vc-util/Dom/class';\nimport { onBeforeUnmount, nextTick, Transition, watch, defineComponent, computed, ref } from 'vue';\nimport { anyType } from '../../_util/type';\nconst calcThumbStyle = targetElement => targetElement ? {\n  left: targetElement.offsetLeft,\n  right: targetElement.parentElement.clientWidth - targetElement.clientWidth - targetElement.offsetLeft,\n  width: targetElement.clientWidth\n} : null;\nconst toPX = value => value !== undefined ? `${value}px` : undefined;\nconst MotionThumb = defineComponent({\n  props: {\n    value: anyType(),\n    getValueIndex: anyType(),\n    prefixCls: anyType(),\n    motionName: anyType(),\n    onMotionStart: anyType(),\n    onMotionEnd: anyType(),\n    direction: anyType(),\n    containerRef: anyType()\n  },\n  emits: ['motionStart', 'motionEnd'],\n  setup(props, _ref) {\n    let {\n      emit\n    } = _ref;\n    const thumbRef = ref();\n    // =========================== Effect ===========================\n    const findValueElement = val => {\n      var _a;\n      const index = props.getValueIndex(val);\n      const ele = (_a = props.containerRef.value) === null || _a === void 0 ? void 0 : _a.querySelectorAll(`.${props.prefixCls}-item`)[index];\n      return (ele === null || ele === void 0 ? void 0 : ele.offsetParent) && ele;\n    };\n    const prevStyle = ref(null);\n    const nextStyle = ref(null);\n    watch(() => props.value, (value, prevValue) => {\n      const prev = findValueElement(prevValue);\n      const next = findValueElement(value);\n      const calcPrevStyle = calcThumbStyle(prev);\n      const calcNextStyle = calcThumbStyle(next);\n      prevStyle.value = calcPrevStyle;\n      nextStyle.value = calcNextStyle;\n      if (prev && next) {\n        emit('motionStart');\n      } else {\n        emit('motionEnd');\n      }\n    }, {\n      flush: 'post'\n    });\n    const thumbStart = computed(() => {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = prevStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    const thumbActive = computed(() => {\n      var _a, _b;\n      return props.direction === 'rtl' ? toPX(-((_a = nextStyle.value) === null || _a === void 0 ? void 0 : _a.right)) : toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.left);\n    });\n    // =========================== Motion ===========================\n    let timeid;\n    const onAppearStart = el => {\n      clearTimeout(timeid);\n      nextTick(() => {\n        if (el) {\n          el.style.transform = `translateX(var(--thumb-start-left))`;\n          el.style.width = `var(--thumb-start-width)`;\n        }\n      });\n    };\n    const onAppearActive = el => {\n      timeid = setTimeout(() => {\n        if (el) {\n          addClass(el, `${props.motionName}-appear-active`);\n          el.style.transform = `translateX(var(--thumb-active-left))`;\n          el.style.width = `var(--thumb-active-width)`;\n        }\n      });\n    };\n    const onAppearEnd = el => {\n      prevStyle.value = null;\n      nextStyle.value = null;\n      if (el) {\n        el.style.transform = null;\n        el.style.width = null;\n        removeClass(el, `${props.motionName}-appear-active`);\n      }\n      emit('motionEnd');\n    };\n    const mergedStyle = computed(() => {\n      var _a, _b;\n      return {\n        '--thumb-start-left': thumbStart.value,\n        '--thumb-start-width': toPX((_a = prevStyle.value) === null || _a === void 0 ? void 0 : _a.width),\n        '--thumb-active-left': thumbActive.value,\n        '--thumb-active-width': toPX((_b = nextStyle.value) === null || _b === void 0 ? void 0 : _b.width)\n      };\n    });\n    onBeforeUnmount(() => {\n      clearTimeout(timeid);\n    });\n    return () => {\n      // It's little ugly which should be refactor when @umi/test update to latest jsdom\n      const motionProps = {\n        ref: thumbRef,\n        style: mergedStyle.value,\n        class: [`${props.prefixCls}-thumb`]\n      };\n      if (process.env.NODE_ENV === 'test') {\n        motionProps['data-test-style'] = JSON.stringify(mergedStyle.value);\n      }\n      return _createVNode(Transition, {\n        \"appear\": true,\n        \"onBeforeEnter\": onAppearStart,\n        \"onEnter\": onAppearActive,\n        \"onAfterEnter\": onAppearEnd\n      }, {\n        default: () => [!prevStyle.value || !nextStyle.value ? null : _createVNode(\"div\", motionProps, null)]\n      });\n    };\n  }\n});\nexport default MotionThumb;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}